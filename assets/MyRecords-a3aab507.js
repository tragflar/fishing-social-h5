import{l as e,r as t,c as a,f as s,L as i,k as l,R as r,Q as n,S as d,F as c,V as o,X as u,M as m,N as p,O as v,B as g,Y as h,W as w}from"./vendor-1eb17f0c.js";import{c as _,a as f,b as y}from"./vant-1b65eea4.js";import{_ as k}from"./_plugin-vue_export-helper-1b428a4d.js";const S={class:"my-records-page"},x={class:"stats-card"},D={class:"stats-grid"},C={class:"stat-item"},N={class:"stat-value"},b={class:"stat-item"},T={class:"stat-value"},z={class:"stat-item"},I={class:"stat-value"},V={class:"stat-item"},A={class:"stat-value"},j={class:"filter-section"},$={class:"records-list"},q=["onClick"],B={class:"record-header"},L={class:"record-info"},P={class:"fish-name"},M={class:"record-time"},U={class:"record-weight"},F={key:0,class:"record-images"},R=["src","alt","onClick"],O={key:0,class:"more-images"},Q={class:"record-details"},W={class:"detail-item"},X={class:"detail-item"},Y={class:"detail-item"},E={key:0,class:"detail-item"},G={class:"record-tags"},H={class:"record-actions"},J={key:0,class:"empty-state"},K=k(e({__name:"MyRecords",setup(e){m();const k=t("all"),K=t("time_desc"),Z=t("all"),ee=[{text:"全部类型",value:"all"},{text:"淡水鱼",value:"freshwater"},{text:"海水鱼",value:"saltwater"}],te=[{text:"时间倒序",value:"time_desc"},{text:"时间正序",value:"time_asc"},{text:"重量倒序",value:"weight_desc"},{text:"重量正序",value:"weight_asc"}],ae=[{text:"全部时间",value:"all"},{text:"最近一周",value:"week"},{text:"最近一月",value:"month"},{text:"最近三月",value:"quarter"}],se=t([]),ie=[{id:"record_1",userId:"current_user",spotId:"spot_1",spotName:"翠湖公园钓点",fishSpecies:"草鱼",weight:2.5,length:45,images:["https://img.yzcdn.cn/vant/apple-1.jpg","https://img.yzcdn.cn/vant/apple-2.jpg"],equipment:["4.5米钓竿","2号主线","1号子线"],bait:"玉米粒",duration:3.5,weather:{temperature:22,humidity:65,pressure:1013,windSpeed:3.2,windDirection:"东南风",weather:"多云",suitabilityIndex:8},notes:"今天天气不错，鱼口很好，用玉米粒钓到了一条不错的草鱼。",catchTime:new Date(Date.now()-864e5),createdAt:new Date(Date.now()-864e5),likes:23,comments:[],isPersonalBest:!0,isNewSpot:!1,isNewSpecies:!1,description:"今天天气不错，鱼口很好，用玉米粒钓到了一条不错的草鱼。"},{id:"record_2",userId:"current_user",spotId:"spot_2",spotName:"野鸭湖水库",fishSpecies:"鲤鱼",weight:1.8,length:38,images:["https://img.yzcdn.cn/vant/apple-3.jpg"],equipment:["5.4米钓竿","3号主线","2号子线"],bait:"蚯蚓",duration:4,weather:{temperature:18,humidity:70,pressure:1008,windSpeed:2.1,windDirection:"北风",weather:"阴天",suitabilityIndex:7},notes:"阴天钓鱼，鱼儿比较活跃。",catchTime:new Date(Date.now()-2592e5),createdAt:new Date(Date.now()-2592e5),likes:15,comments:[],isPersonalBest:!1,isNewSpot:!0,isNewSpecies:!1,description:"阴天钓鱼，鱼儿比较活跃。"},{id:"record_3",userId:"current_user",spotId:"spot_1",spotName:"翠湖公园钓点",fishSpecies:"鲫鱼",weight:.8,length:25,images:[],equipment:["3.6米钓竿","1号主线","0.8号子线"],bait:"红虫",duration:2,weather:{temperature:25,humidity:60,pressure:1015,windSpeed:1.5,windDirection:"微风",weather:"晴天",suitabilityIndex:9},notes:"晴天钓鲫鱼，收获不错。",catchTime:new Date(Date.now()-6048e5),createdAt:new Date(Date.now()-6048e5),likes:8,comments:[],isPersonalBest:!1,isNewSpot:!1,isNewSpecies:!0,description:"晴天钓鲫鱼，收获不错。"}],le=a(()=>{let e=[...se.value];if("all"!==k.value&&(e=e.filter(e=>{const t=["鲫鱼","草鱼","鲤鱼","黑鱼"],a=["带鱼","鲈鱼","石斑鱼"];return"freshwater"===k.value?t.includes(e.fishSpecies):"saltwater"!==k.value||a.includes(e.fishSpecies)})),"all"!==Z.value){const t=new Date,a={week:6048e5,month:2592e6,quarter:7776e6}[Z.value];e=e.filter(e=>t.getTime()-e.createdAt.getTime()<=a)}return e.sort((e,t)=>{switch(K.value){case"time_desc":return t.createdAt.getTime()-e.createdAt.getTime();case"time_asc":return e.createdAt.getTime()-t.createdAt.getTime();case"weight_desc":return t.weight-e.weight;case"weight_asc":return e.weight-t.weight;default:return 0}}),e}),re=a(()=>se.value.length),ne=a(()=>se.value.reduce((e,t)=>e+t.weight,0).toFixed(1)),de=a(()=>new Set(se.value.map(e=>e.fishSpecies)).size),ce=a(()=>new Set(se.value.map(e=>e.spotId)).size),oe=e=>{const t=(new Date).getTime()-e.getTime(),a=Math.floor(t/864e5);return 0===a?"今天 "+e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):1===a?"昨天 "+e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):a<7?`${a}天前`:e.toLocaleDateString("zh-CN")};return s(()=>{se.value=ie}),(e,t)=>{const a=p("van-button"),s=p("van-nav-bar"),m=p("van-dropdown-item"),ie=p("van-dropdown-menu"),ue=p("van-icon"),me=p("van-tag"),pe=p("van-empty");return v(),i("div",S,[l(s,{title:"我的钓获","left-arrow":"",onClickLeft:t[1]||(t[1]=t=>e.$router.back())},{right:r(()=>[l(a,{size:"small",type:"primary",onClick:t[0]||(t[0]=t=>e.$router.push("/record/add"))},{default:r(()=>t[6]||(t[6]=[g(" 添加记录 ",-1)])),_:1,__:[6]})]),_:1}),n("div",x,[n("div",D,[n("div",C,[n("div",N,d(re.value),1),t[7]||(t[7]=n("div",{class:"stat-label"},"总钓获",-1))]),n("div",b,[n("div",T,d(ne.value)+"kg",1),t[8]||(t[8]=n("div",{class:"stat-label"},"总重量",-1))]),n("div",z,[n("div",I,d(de.value),1),t[9]||(t[9]=n("div",{class:"stat-label"},"鱼种数",-1))]),n("div",V,[n("div",A,d(ce.value),1),t[10]||(t[10]=n("div",{class:"stat-label"},"钓点数",-1))])])]),n("div",j,[l(ie,null,{default:r(()=>[l(m,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),options:ee,title:"类型"},null,8,["modelValue"]),l(m,{modelValue:K.value,"onUpdate:modelValue":t[3]||(t[3]=e=>K.value=e),options:te,title:"排序"},null,8,["modelValue"]),l(m,{modelValue:Z.value,"onUpdate:modelValue":t[4]||(t[4]=e=>Z.value=e),options:ae,title:"时间"},null,8,["modelValue"])]),_:1})]),n("div",$,[(v(!0),i(c,null,o(le.value,e=>(v(),i("div",{key:e.id,class:"record-card",onClick:e=>{f("记录详情功能开发中")}},[n("div",B,[n("div",L,[n("div",P,d(e.fishSpecies),1),n("div",M,d(oe(e.createdAt)),1)]),n("div",U,d(e.weight)+"kg",1)]),e.images.length>0?(v(),i("div",F,[(v(!0),i(c,null,o(e.images.slice(0,3),(t,a)=>(v(),i("img",{key:a,src:t,alt:`钓获图片${a+1}`,class:"record-image",onClick:h(t=>{return s=e.images,void _({images:s,startPosition:a});var s},["stop"])},null,8,R))),128)),e.images.length>3?(v(),i("div",O," +"+d(e.images.length-3),1)):u("",!0)])):u("",!0),n("div",Q,[n("div",W,[l(ue,{name:"location-o"}),n("span",null,d(e.spotName),1)]),n("div",X,[l(ue,{name:"clock-o"}),n("span",null,d(e.duration)+"小时",1)]),n("div",Y,[l(ue,{name:"shopping-cart-o"}),n("span",null,d(e.bait),1)]),e.weather?(v(),i("div",E,[l(ue,{name:"sun-o"}),n("span",null,d(e.weather.weather),1)])):u("",!0)]),n("div",G,[e.isPersonalBest?(v(),w(me,{key:0,type:"danger"},{default:r(()=>t[11]||(t[11]=[g(" 个人最佳 ",-1)])),_:1,__:[11]})):u("",!0),e.isNewSpot?(v(),w(me,{key:1,type:"success"},{default:r(()=>t[12]||(t[12]=[g(" 新钓点 ",-1)])),_:1,__:[12]})):u("",!0),e.isNewSpecies?(v(),w(me,{key:2,type:"primary"},{default:r(()=>t[13]||(t[13]=[g(" 新鱼种 ",-1)])),_:1,__:[13]})):u("",!0)]),n("div",H,[l(a,{type:"default",size:"small",icon:"share-o",onClick:h(t=>(e=>{f(`分享${e.fishSpecies}钓获记录`)})(e),["stop"])},{default:r(()=>t[14]||(t[14]=[g(" 分享 ",-1)])),_:2,__:[14]},1032,["onClick"]),l(a,{type:"default",size:"small",icon:"edit",onClick:h(e=>{f("编辑记录功能开发中")},["stop"])},{default:r(()=>t[15]||(t[15]=[g(" 编辑 ",-1)])),_:2,__:[15]},1032,["onClick"]),l(a,{type:"default",size:"small",icon:"delete-o",onClick:h(t=>(async e=>{try{await y({title:"确认删除",message:"确定要删除这条钓获记录吗？"});const t=se.value.findIndex(t=>t.id===e.id);t>-1&&(se.value.splice(t,1),f("删除成功"))}catch{}})(e),["stop"])},{default:r(()=>t[16]||(t[16]=[g(" 删除 ",-1)])),_:2,__:[16]},1032,["onClick"])])],8,q))),128)),0===le.value.length?(v(),i("div",J,[l(pe,{description:"暂无钓获记录"},{default:r(()=>[l(a,{type:"primary",onClick:t[5]||(t[5]=t=>e.$router.push("/record/add"))},{default:r(()=>t[17]||(t[17]=[g(" 添加第一条记录 ",-1)])),_:1,__:[17]})]),_:1})])):u("",!0)])])}}}),[["__scopeId","data-v-7a142136"]]);export{K as default};

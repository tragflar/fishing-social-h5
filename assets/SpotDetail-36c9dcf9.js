import{l as ne,r as h,c as le,f as re,L as r,k as n,R as d,Q as e,W as D,S as i,y as R,F as S,V as I,Y as de,X as k,M as ce,Z as ue,N as c,O as l,B as u}from"./vendor-38d0e5c9.js";import{F as _}from"./fishing-e401f740.js";import{a as v}from"./vant-d7f3bedd.js";import{_ as ve}from"./_plugin-vue_export-helper-c27b6911.js";const pe={class:"spot-detail-page"},ye={key:0,class:"loading-container"},_e={key:1,class:"spot-content"},me={class:"spot-images"},ge=["src","alt"],he={key:1,class:"no-image"},fe={class:"spot-basic-info"},we={class:"spot-header"},ke={class:"spot-name"},Ce={class:"address-section"},be={class:"address"},Te={class:"fish-species-section"},Se={class:"fish-tags"},Ie={class:"description-section"},Le={class:"description-text"},De={class:"weather-section"},Re={class:"weather-main"},ze={class:"weather-left"},Ve={class:"temperature"},$e={class:"weather-desc"},xe={class:"weather-details"},Ae={class:"weather-item"},Ee={class:"value"},je={class:"weather-item"},Be={class:"value"},Me={class:"weather-item"},Qe={class:"value"},We={class:"weather-item"},Fe={class:"click-hint"},Ne={key:0,class:"hydrology-section"},Pe={class:"hydrology-header"},He={class:"update-time"},Ke={class:"hydrology-main"},Oe={class:"hydrology-item"},Ue={class:"hydrology-content"},Xe={class:"hydrology-value"},Ye={class:"hydrology-item"},Ze={class:"hydrology-content"},qe={class:"hydrology-value"},Ge={class:"hydrology-item"},Je={class:"hydrology-content"},et={class:"hydrology-item"},tt={class:"hydrology-content"},st={class:"hydrology-value"},ot={class:"click-hint"},at={class:"strategy-section"},it={class:"strategy-header"},nt={class:"strategy-list"},lt={class:"review-header"},rt=["src"],dt={class:"reviewer-info"},ct={class:"reviewer-name"},ut={class:"review-time"},vt={class:"review-content"},pt={key:0,class:"review-images"},yt=["src"],_t={class:"review-actions"},mt={key:0,class:"no-strategy"},gt={class:"strategy-dialog"},ht={class:"dialog-header"},ft={class:"image-upload"},wt={key:2,class:"error-container"},kt={key:3,class:"bottom-actions"},Ct=ne({__name:"SpotDetail",setup(bt){const z=ce(),E=ue(),L=h(!0),o=h(null),C=h(!1),b=h([]),m=h({content:"",images:[]}),f=h(!1),g=h({temperature:22,humidity:65,pressure:1013,windSpeed:3.2,windDirection:"ä¸œå—é£Ž",weather:"å¤šäº‘",suitabilityIndex:8}),j=le(()=>E.params.id),B={spot_1:{id:"spot_1",name:"ç¿ æ¹–å…¬å›­é’“ç‚¹",type:_.LAKE,latitude:39.9042,longitude:116.4074,address:"åŒ—äº¬å¸‚æµ·æ·€åŒºç¿ æ¹–å…¬å›­å†…",city:"åŒ—äº¬",description:"ç¿ æ¹–å…¬å›­é’“ç‚¹ä½äºŽåŒ—äº¬å¸‚æµ·æ·€åŒºï¼Œæ˜¯ä¸€ä¸ªçŽ¯å¢ƒä¼˜ç¾Žçš„åŸŽå¸‚æ¹–æ³Šé’“ç‚¹ã€‚æ¹–æ°´æ¸…æ¾ˆï¼Œå‘¨å›´ç»¿æ ‘æˆè«ï¼Œç©ºæ°”æ¸…æ–°ï¼Œæ˜¯ä¼‘é—²åž‚é’“çš„ç»ä½³é€‰æ‹©ã€‚",images:["https://img.yzcdn.cn/vant/apple-1.jpg","https://img.yzcdn.cn/vant/apple-2.jpg","https://img.yzcdn.cn/vant/apple-3.jpg"],rating:4.5,reviewCount:128,fishSpecies:["é²«é±¼","è‰é±¼","é²¤é±¼","ç™½æ¡"],createdBy:"user_1",createdAt:new Date,approved:!0,currentPeople:8,distance:2.3,hydrologyInfo:{updateTime:"2023-10-26 10:00",waterLevel:1.2,waterTemperature:22,waterQuality:"è‰¯å¥½",waterClarity:60}},spot_2:{id:"spot_2",name:"å¤©é¹…æ¹–é’“ç‚¹",type:_.RESERVOIR,latitude:39.9142,longitude:116.4174,address:"åŒ—äº¬å¸‚æœé˜³åŒºå¤©é¹…æ¹–å…¬å›­",city:"åŒ—äº¬",description:"å¤©é¹…æ¹–é’“ç‚¹çŽ¯å¢ƒä¼˜ç¾Žï¼Œæ°´è´¨æ¸…æ¾ˆï¼Œæ˜¯åŸŽå¸‚ä¸­éš¾å¾—çš„åž‚é’“èƒœåœ°ã€‚",images:["https://img.yzcdn.cn/vant/apple-4.jpg","https://img.yzcdn.cn/vant/apple-5.jpg"],rating:4.3,reviewCount:89,fishSpecies:["é²«é±¼","é²¤é±¼","é²¢é±¼"],createdBy:"user_2",createdAt:new Date,approved:!0,currentPeople:5,distance:3.1,hydrologyInfo:{updateTime:"2023-10-26 11:30",waterLevel:1.8,waterTemperature:20,waterQuality:"è‰¯å¥½",waterClarity:70}}},M=[{id:"review_1",userId:"user_2",username:"é’“é±¼è¾¾äºº",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:"è¿™ä¸ªé’“ç‚¹çœŸçš„å¾ˆä¸é”™ï¼çŽ¯å¢ƒä¼˜ç¾Žï¼Œé±¼å„¿ä¹Ÿå¾ˆæ´»è·ƒã€‚ä»Šå¤©ç”¨çŽ‰ç±³ç²’é’“äº†3æ¡è‰é±¼ï¼Œæœ€å¤§çš„æœ‰2.5å…¬æ–¤ã€‚æŽ¨èå¤§å®¶æ¥è¯•è¯•ï¼",createdAt:new Date(Date.now()-2*24*60*60*1e3),likes:15,rating:5,images:["https://img.yzcdn.cn/vant/apple-1.jpg"],isLiked:!1},{id:"review_2",userId:"user_3",username:"æ¹–è¾¹è€çŽ‹",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:"è®¾æ–½å¾ˆå®Œå–„ï¼Œåœè½¦æ–¹ä¾¿ï¼Œå°±æ˜¯äººæœ‰ç‚¹å¤šã€‚å»ºè®®æ—©ç‚¹æ¥å ä½ç½®ã€‚",createdAt:new Date(Date.now()-5*24*60*60*1e3),likes:8,rating:4,isLiked:!0}],Q=s=>({[_.FRESHWATER]:"æ·¡æ°´",[_.SALTWATER]:"æµ·æ°´",[_.BLACK_PIT]:"é»‘å‘",[_.RESERVOIR]:"æ°´åº“",[_.RIVER]:"æ²³æµ",[_.LAKE]:"æ¹–æ³Š"})[s]||"æœªçŸ¥",W=s=>s>=8?"excellent":s>=6?"good":s>=4?"fair":"poor",F=s=>{const p=new Date().getTime()-s.getTime(),w=Math.floor(p/(1e3*60*60*24));return w===0?"ä»Šå¤©":w===1?"æ˜¨å¤©":w<7?`${w}å¤©å‰`:s.toLocaleDateString()},N=s=>{const t=new Date(s);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},P=s=>{switch(s){case"è‰¯å¥½":return"good";case"ä¸€èˆ¬":return"fair";case"è¾ƒå·®":return"poor";default:return""}},H=()=>{v("åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­")},K=()=>{o.value&&z.push(`/spot/${o.value.id}/weather`)},O=()=>{o.value&&z.push(`/spot/${o.value.id}/water`)},U=()=>{v("æ°´æ–‡ä¿¡æ¯åˆ·æ–°åŠŸèƒ½å¼€å‘ä¸­")},X=s=>{s.isLiked=!s.isLiked,s.likes+=s.isLiked?1:-1,v(s.isLiked?"ç‚¹èµžæˆåŠŸ":"å–æ¶ˆç‚¹èµž")},Y=s=>{console.log("ä¸Šä¼ æ–‡ä»¶:",s),v("å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½å¼€å‘ä¸­")},Z=()=>{f.value=!f.value,v(f.value?"æ”¶è—æˆåŠŸ":"å–æ¶ˆæ”¶è—")},V=()=>{if(o.value){const{latitude:s,longitude:t}=o.value,p=`https://uri.amap.com/navigation?to=${t},${s}&mode=car&policy=1&src=myapp&coordinate=gaode&callnative=0`;window.open(p,"_blank"),v("æ­£åœ¨æ‰“å¼€å¯¼èˆª")}},q=()=>{if(!m.value.content.trim()){v("è¯·è¾“å…¥è¯„ä»·å†…å®¹");return}const s={id:`review_${Date.now()}`,userId:"current_user",username:"æˆ‘",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:m.value.content,createdAt:new Date,likes:0,rating:5,images:[],isLiked:!1};b.value.unshift(s),C.value=!1,v("è¯„ä»·å‘å¸ƒæˆåŠŸ"),m.value={content:"",images:[]}};return re(async()=>{try{await new Promise(t=>setTimeout(t,1e3));const s=B[j.value];s?(o.value=s,b.value=[...M]):v("é’“ç‚¹ä¿¡æ¯æœªæ‰¾åˆ°")}catch{v("åŠ è½½å¤±è´¥")}finally{L.value=!1}}),(s,t)=>{var x;const p=c("van-icon"),w=c("van-nav-bar"),G=c("van-loading"),J=c("van-swipe-item"),ee=c("van-swipe"),y=c("van-button"),te=c("van-tag"),$=c("van-empty"),se=c("van-field"),oe=c("van-uploader"),ae=c("van-popup");return l(),r("div",pe,[n(w,{title:((x=o.value)==null?void 0:x.name)||"é’“ç‚¹è¯¦æƒ…","left-arrow":"",onClickLeft:t[0]||(t[0]=a=>s.$router.back())},{right:d(()=>[n(p,{name:"share-o",onClick:H})]),_:1},8,["title"]),L.value?(l(),r("div",ye,[n(G,{size:"24px",vertical:""},{default:d(()=>t[6]||(t[6]=[u("åŠ è½½ä¸­...",-1)])),_:1,__:[6]})])):o.value?(l(),r("div",_e,[e("div",me,[o.value.images&&o.value.images.length>0?(l(),D(ee,{key:0,autoplay:3e3,"indicator-color":"white"},{default:d(()=>[(l(!0),r(S,null,I(o.value.images,(a,T)=>(l(),D(J,{key:T},{default:d(()=>[e("img",{src:a,alt:`${o.value.name} å›¾ç‰‡${T+1}`,class:"spot-image"},null,8,ge)]),_:2},1024))),128))]),_:1})):(l(),r("div",he,[n(p,{name:"photo-o",size:"48"}),t[7]||(t[7]=e("p",null,"æš‚æ— å›¾ç‰‡",-1))]))]),e("div",fe,[e("div",we,[e("h1",ke,i(o.value.name),1),e("div",{class:R(["spot-type-badge",o.value.type])},i(Q(o.value.type)),3)]),e("div",Ce,[n(p,{name:"location-o"}),e("span",be,i(o.value.address),1),n(y,{type:"primary",size:"small",onClick:V},{default:d(()=>t[8]||(t[8]=[u(" å¯¼èˆª ",-1)])),_:1,__:[8]})])]),e("div",Te,[t[9]||(t[9]=e("h3",null,"å¯é’“é±¼ç§",-1)),e("div",Se,[(l(!0),r(S,null,I(o.value.fishSpecies,a=>(l(),D(te,{key:a,type:"primary",plain:"",class:"fish-tag"},{default:d(()=>[u(" ðŸŸ "+i(a),1)]),_:2},1024))),128))])]),e("div",Ie,[t[10]||(t[10]=e("h3",null,"é’“ç‚¹ä»‹ç»",-1)),e("p",Le,i(o.value.description),1)]),e("div",De,[t[17]||(t[17]=e("h3",null,"å¤©æ°”ä¿¡æ¯",-1)),e("div",{class:"weather-card",onClick:K},[e("div",Re,[e("div",ze,[e("div",Ve,i(g.value.temperature)+"Â°C",1),e("div",$e,i(g.value.weather),1)]),t[11]||(t[11]=e("div",{class:"weather-right"},[e("div",{class:"weather-icon"},"ðŸŒ¤ï¸")],-1))]),e("div",xe,[e("div",Ae,[t[12]||(t[12]=e("span",{class:"label"},"æ¹¿åº¦",-1)),e("span",Ee,i(g.value.humidity)+"%",1)]),e("div",je,[t[13]||(t[13]=e("span",{class:"label"},"æ°”åŽ‹",-1)),e("span",Be,i(g.value.pressure)+"hPa",1)]),e("div",Me,[t[14]||(t[14]=e("span",{class:"label"},"é£Žé€Ÿ",-1)),e("span",Qe,i(g.value.windSpeed)+"m/s",1)]),e("div",We,[t[15]||(t[15]=e("span",{class:"label"},"é€‚é’“æŒ‡æ•°",-1)),e("span",{class:R(["value suitability",W(g.value.suitabilityIndex)])},i(g.value.suitabilityIndex)+"/10 ",3)])]),e("div",Fe,[n(p,{name:"arrow"}),t[16]||(t[16]=e("span",null,"ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†å¤©æ°”ä¿¡æ¯",-1))])])]),o.value.hydrologyInfo?(l(),r("div",Ne,[t[28]||(t[28]=e("h3",null,"æ°´æ–‡ä¿¡æ¯",-1)),e("div",{class:"hydrology-card",onClick:O},[e("div",Pe,[e("div",He," æ›´æ–°æ—¶é—´ï¼š"+i(N(o.value.hydrologyInfo.updateTime)),1),n(y,{type:"primary",size:"small",onClick:de(U,["stop"])},{default:d(()=>t[18]||(t[18]=[u(" åˆ·æ–° ",-1)])),_:1,__:[18]})]),e("div",Ke,[e("div",Oe,[t[20]||(t[20]=e("div",{class:"hydrology-icon"},"ðŸŒŠ",-1)),e("div",Ue,[t[19]||(t[19]=e("div",{class:"hydrology-label"},"æ°´ä½",-1)),e("div",Xe,i(o.value.hydrologyInfo.waterLevel)+"ç±³",1)])]),e("div",Ye,[t[22]||(t[22]=e("div",{class:"hydrology-icon"},"ðŸŒ¡ï¸",-1)),e("div",Ze,[t[21]||(t[21]=e("div",{class:"hydrology-label"},"æ°´æ¸©",-1)),e("div",qe,i(o.value.hydrologyInfo.waterTemperature)+"Â°C",1)])]),e("div",Ge,[t[24]||(t[24]=e("div",{class:"hydrology-icon"},"ðŸ’§",-1)),e("div",Je,[t[23]||(t[23]=e("div",{class:"hydrology-label"},"æ°´è´¨",-1)),e("div",{class:R(["hydrology-value",P(o.value.hydrologyInfo.waterQuality)])},i(o.value.hydrologyInfo.waterQuality),3)])]),e("div",et,[t[26]||(t[26]=e("div",{class:"hydrology-icon"},"ðŸ‘ï¸",-1)),e("div",tt,[t[25]||(t[25]=e("div",{class:"hydrology-label"},"é€æ˜Žåº¦",-1)),e("div",st,i(o.value.hydrologyInfo.waterClarity)+"cm",1)])])]),e("div",ot,[n(p,{name:"arrow"}),t[27]||(t[27]=e("span",null,"ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ°´æ–‡ä¿¡æ¯",-1))])])])):k("",!0),e("div",at,[e("div",it,[e("h3",null,"é’“ç‚¹æ”»ç•¥ ("+i(b.value.length)+")",1),n(y,{type:"primary",size:"small",onClick:t[1]||(t[1]=a=>C.value=!0)},{default:d(()=>t[29]||(t[29]=[u(" åˆ†äº«æ”»ç•¥ ",-1)])),_:1,__:[29]})]),e("div",nt,[(l(!0),r(S,null,I(b.value,a=>{var T;return l(),r("div",{key:a.id,class:"strategy-item"},[e("div",lt,[e("img",{src:a.avatar,alt:"å¤´åƒ",class:"reviewer-avatar"},null,8,rt),e("div",dt,[e("div",ct,i(a.username),1),e("div",ut,i(F(a.createdAt)),1)])]),e("div",vt,i(a.content),1),(T=a.images)!=null&&T.length?(l(),r("div",pt,[(l(!0),r(S,null,I(a.images,(A,ie)=>(l(),r("img",{key:ie,src:A,alt:"è¯„ä»·å›¾ç‰‡",class:"review-image"},null,8,yt))),128))])):k("",!0),e("div",_t,[n(y,{type:"default",size:"mini",icon:a.isLiked?"like":"like-o",onClick:A=>X(a)},{default:d(()=>[u(i(a.likes),1)]),_:2},1032,["icon","onClick"])])])}),128))]),b.value.length===0?(l(),r("div",mt,[n($,{description:"æš‚æ— æ”»ç•¥"},{default:d(()=>[n(y,{type:"primary",onClick:t[2]||(t[2]=a=>C.value=!0)},{default:d(()=>t[30]||(t[30]=[u(" åˆ†äº«ç¬¬ä¸€æ¡æ”»ç•¥ ",-1)])),_:1,__:[30]})]),_:1})])):k("",!0)])])):k("",!0),n(ae,{show:C.value,"onUpdate:show":t[5]||(t[5]=a=>C.value=a),position:"bottom",style:{height:"70%"}},{default:d(()=>[e("div",gt,[e("div",ht,[t[32]||(t[32]=e("h3",null,"åˆ†äº«æ”»ç•¥",-1)),n(y,{type:"primary",size:"small",onClick:q},{default:d(()=>t[31]||(t[31]=[u("å‘å¸ƒ",-1)])),_:1,__:[31]})]),n(se,{modelValue:m.value.content,"onUpdate:modelValue":t[3]||(t[3]=a=>m.value.content=a),type:"textarea",placeholder:"åˆ†äº«ä½ çš„é’“é±¼æ”»ç•¥å’ŒæŠ€å·§...",rows:"4",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),e("div",ft,[n(oe,{modelValue:m.value.images,"onUpdate:modelValue":t[4]||(t[4]=a=>m.value.images=a),multiple:"","max-count":3,"after-read":Y},null,8,["modelValue"])])])]),_:1},8,["show"]),!L.value&&!o.value?(l(),r("div",wt,[n($,{description:"é’“ç‚¹ä¿¡æ¯åŠ è½½å¤±è´¥"})])):k("",!0),o.value?(l(),r("div",kt,[n(y,{icon:f.value?"star":"star-o",type:f.value?"warning":"default",size:"large",class:"action-btn collect-btn",onClick:Z},{default:d(()=>[u(i(f.value?"å·²æ”¶è—":"æ”¶è—"),1)]),_:1},8,["icon","type"]),n(y,{icon:"guide-o",type:"primary",size:"large",class:"action-btn navigate-btn",onClick:V},{default:d(()=>t[33]||(t[33]=[u(" å¯¼èˆª ",-1)])),_:1,__:[33]})])):k("",!0)])}}});const Dt=ve(Ct,[["__scopeId","data-v-40c38e72"]]);export{Dt as default};

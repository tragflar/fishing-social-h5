import{l as ee,r as b,c as A,f as te,L as c,k as y,R as m,Q as t,S as n,A as se,M as oe,N as R,O as i,F as f,V as C,y as g,u as l,X as E,W,B as L}from"./vendor-38d0e5c9.js";import{a as r,b as s}from"./fishing-e401f740.js";import{b as ae,a as H}from"./vant-d7f3bedd.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";const p=[{id:"crucian_carp",name:"鲫鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"常见的淡水鱼类，适应性强，分布广泛",habitat:["湖泊","水库","河流"],season:["春季","秋季"]},{id:"grass_carp",name:"草鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"草食性鱼类，体型较大，肉质鲜美",habitat:["湖泊","水库","河流"],season:["夏季","秋季"]},{id:"common_carp",name:"鲤鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"经典的淡水鱼类，钓获难度适中",habitat:["湖泊","水库","河流"],season:["春季","秋季"]},{id:"silver_carp",name:"白鲢",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"滤食性鱼类，体型较大",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"bighead_carp",name:"花鲢",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"头部较大，肉质鲜美",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"white_striped_bass",name:"白条",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.COMMON,description:"小型鱼类，数量众多",habitat:["河流","溪流"],season:["全年"]},{id:"black_fish",name:"黑鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.RARE,description:"肉食性鱼类，体型较大，钓获难度高",habitat:["湖泊","水库","河流"],season:["夏季","秋季"]},{id:"snakehead",name:"鳢鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.RARE,description:"凶猛的肉食性鱼类",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"mandarin_fish",name:"鳜鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.RARE,description:"珍贵的淡水鱼类，肉质鲜美",habitat:["湖泊","水库"],season:["春季","秋季"]},{id:"perch",name:"鲈鱼",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.RARE,description:"肉食性鱼类，钓获难度较高",habitat:["湖泊","水库"],season:["春季","秋季"]},{id:"chinese_sturgeon",name:"中华鲟",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.EPIC,description:"国家一级保护动物，极其珍贵",habitat:["长江"],season:["春季"]},{id:"yangtze_sturgeon",name:"长江鲟",icon:"🐟",lockedIcon:"",category:r.FRESHWATER,rarity:s.EPIC,description:"长江特有物种，极其稀有",habitat:["长江"],season:["春季"]},{id:"sea_bass",name:"海鲈",icon:"🐟",lockedIcon:"",category:r.SALTWATER,rarity:s.RARE,description:"海水鱼类，肉质鲜美",habitat:["近海","海湾"],season:["春季","秋季"]},{id:"yellow_croaker",name:"黄鱼",icon:"🐟",lockedIcon:"",category:r.SALTWATER,rarity:s.COMMON,description:"常见的海水鱼类",habitat:["近海"],season:["春季","秋季"]},{id:"red_snapper",name:"红鲷",icon:"🐟",lockedIcon:"",category:r.SALTWATER,rarity:s.RARE,description:"珍贵的海水鱼类",habitat:["深海"],season:["全年"]}],w={[s.COMMON]:p.filter(a=>a.rarity===s.COMMON),[s.RARE]:p.filter(a=>a.rarity===s.RARE),[s.EPIC]:p.filter(a=>a.rarity===s.EPIC),[s.LEGENDARY]:p.filter(a=>a.rarity===s.LEGENDARY)};r.FRESHWATER+"",p.filter(a=>a.category===r.FRESHWATER),r.SALTWATER+"",p.filter(a=>a.category===r.SALTWATER),r.LAKE+"",p.filter(a=>a.category===r.LAKE),r.RIVER+"",p.filter(a=>a.category===r.RIVER);const F=a=>({[s.COMMON]:"常见",[s.RARE]:"稀有",[s.EPIC]:"史诗",[s.LEGENDARY]:"传说"})[a],ie="fishProgress",P=a=>{try{const u=localStorage.getItem(`${ie}_${a}`);if(u){const h=JSON.parse(u);return Object.keys(h.unlockedFish).forEach(d=>{h.unlockedFish[d].firstCatchDate&&(h.unlockedFish[d].firstCatchDate=new Date(h.unlockedFish[d].firstCatchDate))}),h}}catch(u){console.error("读取鱼类解锁进度失败:",u)}return{userId:a,unlockedFish:{},totalUnlocked:0}},v=(a,u)=>{const d=P(a).unlockedFish[u];return{fishId:u,isUnlocked:(d==null?void 0:d.isUnlocked)||!1,firstCatchDate:d==null?void 0:d.firstCatchDate,totalCatchCount:(d==null?void 0:d.totalCatchCount)||0}},re=a=>{const u=P(a),h=15;return{totalUnlocked:u.totalUnlocked,totalFish:h,unlockPercentage:Math.round(u.totalUnlocked/h*100)}},ce={class:"fish-guide-page"},le={class:"progress-section"},de={class:"progress-header"},ue={class:"progress-text"},_e={class:"progress-bar"},ve={class:"progress-percentage"},he={class:"filter-section"},ke={class:"filter-tabs"},ye={class:"fish-grid"},pe=["onClick"],me={class:"fish-icon"},ge={class:"fish-name"},Re={key:0,class:"unlock-badge"},Ee={class:"fish-grid"},fe=["onClick"],Ce={class:"fish-icon"},be={class:"fish-name"},Ae={key:0,class:"unlock-badge"},Fe={class:"fish-grid"},Se=["onClick"],Ue={class:"fish-icon"},Te={class:"fish-name"},Me={key:0,class:"unlock-badge"},Oe={class:"fish-grid"},we=["onClick"],Ie={class:"fish-icon"},Ne={class:"fish-name"},We={key:0,class:"unlock-badge"},Le={key:0,class:"fish-detail"},He={class:"detail-header"},Pe={class:"fish-info"},De={class:"fish-icon-large"},Ve={class:"fish-details"},$e={class:"detail-content"},Ge={key:0,class:"unlock-info"},xe={class:"info-item"},Be={class:"value"},Ke={class:"info-item"},Ye={class:"value"},ze={key:1,class:"locked-info"},je={key:2,class:"fish-description"},Je={key:3,class:"fish-habitat"},Qe={class:"habitat-tags"},Xe={key:4,class:"fish-season"},qe={class:"season-tags"},Ze=ee({__name:"FishGuide",setup(a){oe();const u=b(""),h=b("all"),d=b(!1),M=b(!1),_=b(null),D=[{name:"重置解锁进度",color:"#ee0a24"},{name:"关于图鉴",color:"#1989fa"}],S=A(()=>re("current_user")),V=A(()=>u.value?p.filter(k=>k.name.toLowerCase().includes(u.value.toLowerCase())):p),$=A(()=>w[s.COMMON]),G=A(()=>w[s.RARE]),x=A(()=>w[s.EPIC]),B=()=>{},K=k=>{h.value=k},U=k=>{_.value=k,d.value=!0},Y=()=>{M.value=!0},z=async k=>{k.name==="重置解锁进度"?await ae({title:"确认重置",message:"这将清除所有解锁进度，确定要继续吗？"})&&H("重置功能开发中"):k.name==="关于图鉴"&&H("图鉴功能说明开发中")},j=k=>k?k.toLocaleDateString():"未知";return te(()=>{}),(k,o)=>{const I=R("van-icon"),J=R("van-nav-bar"),Q=R("van-search"),T=R("van-tab"),X=R("van-tabs"),N=R("van-tag"),q=R("van-popup"),Z=R("van-action-sheet");return i(),c("div",ce,[y(J,{title:"钓鱼图鉴","left-arrow":"",onClickLeft:o[0]||(o[0]=e=>k.$router.back())},{right:m(()=>[y(I,{name:"setting-o",onClick:Y})]),_:1}),t("div",le,[t("div",de,[o[6]||(o[6]=t("h3",null,"解锁进度",-1)),t("span",ue,n(S.value.totalUnlocked)+"/"+n(S.value.totalFish),1)]),t("div",_e,[t("div",{class:"progress-fill",style:se({width:`${S.value.unlockPercentage}%`})},null,4)]),t("div",ve,n(S.value.unlockPercentage)+"%",1)]),t("div",he,[y(Q,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),placeholder:"搜索鱼类名称",onSearch:B},null,8,["modelValue"]),t("div",ke,[y(X,{active:h.value,"onUpdate:active":o[2]||(o[2]=e=>h.value=e),onChange:K},{default:m(()=>[y(T,{title:"全部",name:"all"},{default:m(()=>[t("div",ye,[(i(!0),c(f,null,C(V.value,e=>(i(),c("div",{key:e.id,class:g(["fish-card",{unlocked:l(v)("current_user",e.id).isUnlocked}]),onClick:O=>U(e)},[t("div",me,n(l(v)("current_user",e.id).isUnlocked?e.icon:""),1),t("div",ge,n(e.name),1),t("div",{class:g(["fish-rarity",e.rarity])},n(l(F)(e.rarity)),3),l(v)("current_user",e.id).isUnlocked?(i(),c("div",Re," ✓ ")):E("",!0)],10,pe))),128))])]),_:1}),y(T,{title:"常见",name:"common"},{default:m(()=>[t("div",Ee,[(i(!0),c(f,null,C($.value,e=>(i(),c("div",{key:e.id,class:g(["fish-card",{unlocked:l(v)("current_user",e.id).isUnlocked}]),onClick:O=>U(e)},[t("div",Ce,n(l(v)("current_user",e.id).isUnlocked?e.icon:""),1),t("div",be,n(e.name),1),t("div",{class:g(["fish-rarity",e.rarity])},n(l(F)(e.rarity)),3),l(v)("current_user",e.id).isUnlocked?(i(),c("div",Ae," ✓ ")):E("",!0)],10,fe))),128))])]),_:1}),y(T,{title:"稀有",name:"rare"},{default:m(()=>[t("div",Fe,[(i(!0),c(f,null,C(G.value,e=>(i(),c("div",{key:e.id,class:g(["fish-card",{unlocked:l(v)("current_user",e.id).isUnlocked}]),onClick:O=>U(e)},[t("div",Ue,n(l(v)("current_user",e.id).isUnlocked?e.icon:""),1),t("div",Te,n(e.name),1),t("div",{class:g(["fish-rarity",e.rarity])},n(l(F)(e.rarity)),3),l(v)("current_user",e.id).isUnlocked?(i(),c("div",Me," ✓ ")):E("",!0)],10,Se))),128))])]),_:1}),y(T,{title:"史诗",name:"epic"},{default:m(()=>[t("div",Oe,[(i(!0),c(f,null,C(x.value,e=>(i(),c("div",{key:e.id,class:g(["fish-card",{unlocked:l(v)("current_user",e.id).isUnlocked}]),onClick:O=>U(e)},[t("div",Ie,n(l(v)("current_user",e.id).isUnlocked?e.icon:""),1),t("div",Ne,n(e.name),1),t("div",{class:g(["fish-rarity",e.rarity])},n(l(F)(e.rarity)),3),l(v)("current_user",e.id).isUnlocked?(i(),c("div",We," ✓ ")):E("",!0)],10,we))),128))])]),_:1})]),_:1},8,["active"])])]),y(q,{show:d.value,"onUpdate:show":o[4]||(o[4]=e=>d.value=e),position:"bottom",style:{height:"70%"}},{default:m(()=>[_.value?(i(),c("div",Le,[t("div",He,[t("div",Pe,[t("div",De,n(l(v)("current_user",_.value.id).isUnlocked?_.value.icon:""),1),t("div",Ve,[t("h3",null,n(_.value.name),1),t("div",{class:g(["fish-rarity-badge",_.value.rarity])},n(l(F)(_.value.rarity)),3)])]),y(I,{name:"cross",onClick:o[3]||(o[3]=e=>d.value=!1)})]),t("div",$e,[l(v)("current_user",_.value.id).isUnlocked?(i(),c("div",Ge,[t("div",xe,[o[7]||(o[7]=t("span",{class:"label"},"首次钓获：",-1)),t("span",Be,n(j(l(v)("current_user",_.value.id).firstCatchDate)),1)]),t("div",Ke,[o[8]||(o[8]=t("span",{class:"label"},"总钓获：",-1)),t("span",Ye,n(l(v)("current_user",_.value.id).totalCatchCount)+"条",1)])])):(i(),c("div",ze,o[9]||(o[9]=[t("p",null,"尚未解锁此鱼类",-1),t("p",null,"钓获此鱼类即可解锁",-1)]))),_.value.description?(i(),c("div",je,[o[10]||(o[10]=t("h4",null,"鱼类介绍",-1)),t("p",null,n(_.value.description),1)])):E("",!0),_.value.habitat?(i(),c("div",Je,[o[11]||(o[11]=t("h4",null,"栖息地",-1)),t("div",Qe,[(i(!0),c(f,null,C(_.value.habitat,e=>(i(),W(N,{key:e,type:"primary",plain:""},{default:m(()=>[L(n(e),1)]),_:2},1024))),128))])])):E("",!0),_.value.season?(i(),c("div",Xe,[o[12]||(o[12]=t("h4",null,"最佳钓鱼季节",-1)),t("div",qe,[(i(!0),c(f,null,C(_.value.season,e=>(i(),W(N,{key:e,type:"success",plain:""},{default:m(()=>[L(n(e),1)]),_:2},1024))),128))])])):E("",!0)])])):E("",!0)]),_:1},8,["show"]),y(Z,{show:M.value,"onUpdate:show":o[5]||(o[5]=e=>M.value=e),actions:D,onSelect:z},null,8,["show"])])}}});const at=ne(Ze,[["__scopeId","data-v-e7246027"]]);export{at as default};

import{l as ue,r as c,c as H,f as ve,L as l,Q as t,U as he,F as h,V as m,k as d,R as y,S as o,y as g,M as me,N as k,O as n,A as ge,B as b,W as X,X as f}from"./vendor-38d0e5c9.js";import{a as N}from"./vant-d7f3bedd.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";const fe={class:"home-page"},ye={class:"map-container"},ke={class:"fishing-map"},be={class:"map-background"},xe=["onClick"],Ce={class:"marker-icon"},Se={class:"marker-info"},we={class:"zoom-controls"},ze={class:"map-controls"},Pe={class:"filter-tabs"},Me={class:"tab-scroll"},je=["onClick"],$e={class:"list-content"},De={class:"filter-section"},Oe=["onClick"],Ve={class:"list-header"},Ne={class:"result-count"},Te={class:"spots-list"},Fe=["onClick"],Le={class:"spot-image"},Be=["src"],Ie={class:"spot-info"},Ae={class:"spot-header"},He={class:"spot-name"},Xe={class:"spot-fish-species"},Ue={class:"species-list"},Ze={class:"spot-meta"},qe={class:"spot-type"},Ee={class:"spot-distance"},Re={class:"filter-popup"},Ye={class:"popup-header"},Qe={class:"popup-content"},We={key:0,class:"filter-options"},Ge=["onClick"],Je={key:1,class:"filter-options"},Ke=["onClick"],et={key:2,class:"filter-options"},tt=["onClick"],at={key:3,class:"filter-options"},st=["onClick"],U=.5,Z=2,it=ue({__name:"Home",setup(nt){const x=me(),T=c([{id:"spot_1",name:"金鱼池钓点",latitude:39.9042,longitude:116.4074,images:["https://img.yzcdn.cn/vant/apple-1.jpg"],description:"环境优美，水质清澈，适合各种钓法。",rating:4.8,distance:2.7,type:"lake",location:"成都市锦江区",rank:1,recentCatches:152,currentPeople:8,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_2",name:"天鹅湖钓点",latitude:39.9142,longitude:116.4174,images:["https://img.yzcdn.cn/vant/apple-2.jpg"],description:"水库环境好，鱼获丰富。",rating:4.8,distance:2.7,type:"reservoir",location:"成都市青羊区",rank:2,recentCatches:98,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","鲢鱼"]},{id:"spot_3",name:"翠湖公园钓点",latitude:39.8942,longitude:116.3974,images:["https://img.yzcdn.cn/vant/apple-3.jpg"],description:"城市中心的休闲钓点。",rating:4.9,distance:4.9,type:"lake",location:"成都市武侯区",rank:3,recentCatches:76,currentPeople:12,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_4",name:"青羊湖钓点",latitude:39.9242,longitude:116.4274,images:["https://img.yzcdn.cn/vant/apple-4.jpg"],description:"青羊区知名钓点，环境优美，鱼种丰富。",rating:4.7,distance:3.2,type:"lake",location:"成都市青羊区",rank:4,recentCatches:89,currentPeople:6,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼"]},{id:"spot_5",name:"锦江黑坑",latitude:39.8842,longitude:116.3874,images:["https://img.yzcdn.cn/vant/apple-5.jpg"],description:"专业黑坑钓场，设备齐全，适合竞技钓鱼。",rating:4.6,distance:5.1,type:"black_pit",location:"成都市锦江区",rank:5,recentCatches:134,currentPeople:15,fishSpecies:["鲫鱼","鲤鱼","草鱼","青鱼"]},{id:"spot_6",name:"双流水库",latitude:39.9342,longitude:116.4374,images:["https://img.yzcdn.cn/vant/apple-6.jpg"],description:"大型水库钓点，水质优良，适合野钓。",rating:4.9,distance:8.3,type:"reservoir",location:"成都市双流区",rank:6,recentCatches:67,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_7",name:"龙泉山溪流",latitude:39.8742,longitude:116.3774,images:["https://img.yzcdn.cn/vant/apple-7.jpg"],description:"山间溪流钓点，环境原始，适合溪流钓法。",rating:4.5,distance:12.7,type:"river",location:"成都市龙泉驿区",rank:7,recentCatches:45,currentPeople:3,fishSpecies:["马口鱼","溪石斑","小鲫鱼"]},{id:"spot_8",name:"温江鱼塘",latitude:39.9442,longitude:116.4474,images:["https://img.yzcdn.cn/vant/apple-8.jpg"],description:"专业鱼塘，鱼密度高，适合新手练习。",rating:4.4,distance:15.2,type:"lake",location:"成都市温江区",rank:8,recentCatches:156,currentPeople:18,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼"]},{id:"spot_9",name:"新都野钓场",latitude:39.8642,longitude:116.3674,images:["https://img.yzcdn.cn/vant/apple-9.jpg"],description:"野钓天堂，环境自然，鱼获丰富。",rating:4.8,distance:18.9,type:"lake",location:"成都市新都区",rank:9,recentCatches:78,currentPeople:7,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_10",name:"郫都竞技池",latitude:39.9542,longitude:116.4574,images:["https://img.yzcdn.cn/vant/apple-10.jpg"],description:"专业竞技钓场，举办各类钓鱼比赛。",rating:4.7,distance:22.1,type:"black_pit",location:"成都市郫都区",rank:10,recentCatches:92,currentPeople:12,fishSpecies:["鲫鱼","鲤鱼","草鱼","青鱼"]},{id:"spot_11",name:"都江堰灌渠",latitude:39.8442,longitude:116.3574,images:["https://img.yzcdn.cn/vant/apple-11.jpg"],description:"灌渠钓点，水流稳定，适合台钓。",rating:4.3,distance:25.6,type:"river",location:"成都市都江堰市",rank:11,recentCatches:56,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_12",name:"彭州山塘",latitude:39.9642,longitude:116.4674,images:["https://img.yzcdn.cn/vant/apple-12.jpg"],description:"山间小塘，环境幽静，适合休闲钓鱼。",rating:4.6,distance:28.3,type:"lake",location:"成都市彭州市",rank:12,recentCatches:43,currentPeople:2,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_13",name:"崇州水库",latitude:39.8342,longitude:116.3474,images:["https://img.yzcdn.cn/vant/apple-13.jpg"],description:"大型水库，水质清澈，适合各种钓法。",rating:4.8,distance:31.7,type:"reservoir",location:"成都市崇州市",rank:13,recentCatches:89,currentPeople:6,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]},{id:"spot_14",name:"大邑野钓场",latitude:39.9742,longitude:116.4774,images:["https://img.yzcdn.cn/vant/apple-14.jpg"],description:"野钓胜地，环境优美，鱼种丰富。",rating:4.7,distance:34.2,type:"lake",location:"成都市大邑县",rank:14,recentCatches:67,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_15",name:"蒲江溪流",latitude:39.8242,longitude:116.3374,images:["https://img.yzcdn.cn/vant/apple-15.jpg"],description:"溪流钓点，水流湍急，适合路亚钓法。",rating:4.4,distance:37.8,type:"river",location:"成都市蒲江县",rank:15,recentCatches:38,currentPeople:3,fishSpecies:["马口鱼","溪石斑","小鲫鱼","白条"]},{id:"spot_16",name:"新津鱼塘",latitude:39.9842,longitude:116.4874,images:["https://img.yzcdn.cn/vant/apple-16.jpg"],description:"专业鱼塘，设备完善，适合新手。",rating:4.5,distance:41.3,type:"lake",location:"成都市新津区",rank:16,recentCatches:123,currentPeople:16,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_17",name:"简阳水库",latitude:39.8142,longitude:116.3274,images:["https://img.yzcdn.cn/vant/apple-17.jpg"],description:"大型水库，环境优美，适合野钓。",rating:4.6,distance:44.9,type:"reservoir",location:"成都市简阳市",rank:17,recentCatches:71,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]},{id:"spot_18",name:"金堂野钓场",latitude:39.9942,longitude:116.4974,images:["https://img.yzcdn.cn/vant/apple-18.jpg"],description:"野钓天堂，环境自然，鱼获丰富。",rating:4.7,distance:47.6,type:"lake",location:"成都市金堂县",rank:18,recentCatches:58,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_19",name:"邛崃山塘",latitude:39.8042,longitude:116.3174,images:["https://img.yzcdn.cn/vant/apple-19.jpg"],description:"山间小塘，环境幽静，适合休闲钓鱼。",rating:4.4,distance:51.2,type:"lake",location:"成都市邛崃市",rank:19,recentCatches:42,currentPeople:2,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_20",name:"青白江钓场",latitude:39.9942,longitude:116.5074,images:["https://img.yzcdn.cn/vant/apple-20.jpg"],description:"综合钓场，设施齐全，适合各种钓法。",rating:4.8,distance:54.8,type:"lake",location:"成都市青白江区",rank:20,recentCatches:95,currentPeople:8,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]}]),F=[{key:"nearby",label:"附近",hasDropdown:!0},{key:"sort",label:"排序",hasDropdown:!0},{key:"type",label:"类型",hasDropdown:!0},{key:"fish",label:"鱼种",hasDropdown:!0}],r=c(""),u=c(!1),q=[{text:"全部",value:"all"},{text:"1km内",value:"1"},{text:"3km内",value:"3"},{text:"5km内",value:"5"},{text:"10km内",value:"10"}],E=[{text:"距离优先",value:"distance"},{text:"人气优先",value:"popularity"},{text:"评分优先",value:"rating"}],R=[{text:"全部",value:"all"},{text:"淡水",value:"freshwater"},{text:"海水",value:"saltwater"},{text:"黑坑",value:"black_pit"},{text:"水库",value:"reservoir"},{text:"河流",value:"river"},{text:"湖泊",value:"lake"}],Y=[{text:"全部",value:"all"},{text:"鲫鱼",value:"crucian"},{text:"鲤鱼",value:"carp"},{text:"草鱼",value:"grass_carp"},{text:"鲢鱼",value:"silver_carp"},{text:"鳙鱼",value:"bighead_carp"},{text:"青鱼",value:"black_carp"},{text:"马口鱼",value:"opsariichthys"},{text:"溪石斑",value:"stream_bass"},{text:"白条",value:"white_striped"}],C=c("all"),j=c("distance"),S=c("all"),w=c("all"),z=c({lat:39.9042,lng:116.3974}),$=c(null),L=c(0),Q=s=>{switch(s){case 0:x.push("/home");break;case 1:x.push("/profile");break}},p=c(1),W=()=>{p.value<Z&&(p.value=Math.min(p.value+.2,Z),B())},G=()=>{p.value>U&&(p.value=Math.max(p.value-.2,U),B())},B=()=>{const a=Math.round(500/p.value),i=document.querySelector(".map-scale span");i&&(i.textContent=`${a}m`)},P=H(()=>{let s=T.value;if(C.value!=="all"){const a=parseInt(C.value);s=s.filter(i=>i.distance<=a)}if(S.value!=="all"&&(s=s.filter(a=>a.type===S.value)),w.value!=="all"){const i={crucian:"鲫鱼",carp:"鲤鱼",grass_carp:"草鱼",silver_carp:"鲢鱼",bighead_carp:"鳙鱼",black_carp:"青鱼",opsariichthys:"马口鱼",stream_bass:"溪石斑",white_striped:"白条"}[w.value];i&&(s=s.filter(_=>_.fishSpecies.includes(i)))}switch(j.value){case"distance":s.sort((a,i)=>a.distance-i.distance);break;case"popularity":s.sort((a,i)=>i.currentPeople-a.currentPeople);break;case"rating":s.sort((a,i)=>i.rating-a.rating);break}return s}),I=H(()=>P.value.slice(0,3)),A=s=>{r.value===s?(r.value="",u.value=!1):(r.value=s,u.value=!0)},J=s=>{const _=(s.longitude-z.value.lng)*1e3*p.value,O=(s.latitude-z.value.lat)*1e3*p.value,M=50+_,V=50-O;return{left:`${Math.max(5,Math.min(95,M))}%`,top:`${Math.max(5,Math.min(95,V))}%`,transform:`scale(${1/Math.sqrt(p.value)})`}},K=s=>{$.value=s,z.value={lat:s.latitude,lng:s.longitude},N(`选中钓点: ${s.name}`)},ee=()=>{z.value={lat:39.9042,lng:116.3974},$.value=null,N("已定位到当前位置")},te=()=>{N("切换视图")},ae=s=>{x.push(`/spot/${s.id}`)},se=()=>{x.push("/spot/add")},ie=s=>({nearby:"选择距离",sort:"排序方式",type:"钓点类型",fish:"鱼种选择"})[s]||"",ne=s=>{C.value=s,u.value=!1},le=s=>{j.value=s,u.value=!1},oe=s=>{S.value=s,u.value=!1},ce=s=>{w.value=s,u.value=!1},D=c(!0),de=()=>{D.value=!D.value},re=s=>{const a={lake:"location",reservoir:"guide-o",river:"water-o",saltwater:"flag-o",black_pit:"gem-o",default:"location-o"};return a[s]||a.default};return ve(()=>{console.log("钓点数据:",T.value),console.log("筛选后的钓点:",P.value),console.log("显示的钓点:",I.value)}),(s,a)=>{const i=k("van-icon"),_=k("van-button"),O=k("van-popup"),M=k("van-tabbar-item"),V=k("van-tabbar");return n(),l("div",fe,[t("div",ye,[t("div",ke,[t("div",be,[a[3]||(a[3]=he('<div class="map-grid" data-v-ac703bff></div><div class="main-roads" data-v-ac703bff><div class="main-road" style="top:20%;left:10%;width:80%;height:4px;" data-v-ac703bff></div><div class="main-road" style="top:10%;left:20%;width:4px;height:80%;" data-v-ac703bff></div><div class="main-road" style="top:60%;left:30%;width:60%;height:4px;" data-v-ac703bff></div></div><div class="minor-roads" data-v-ac703bff><div class="minor-road" style="top:30%;left:15%;width:70%;height:2px;" data-v-ac703bff></div><div class="minor-road" style="top:15%;left:40%;width:2px;height:70%;" data-v-ac703bff></div><div class="minor-road" style="top:45%;left:25%;width:50%;height:2px;" data-v-ac703bff></div></div><div class="green-areas" data-v-ac703bff><div class="green-area" style="top:25%;left:25%;width:100px;height:100px;border-radius:10px;" data-v-ac703bff></div><div class="green-area" style="top:55%;left:65%;width:80px;height:120px;border-radius:8px;" data-v-ac703bff></div></div><div class="buildings" data-v-ac703bff><div class="building" style="top:35%;left:35%;width:60px;height:40px;border-radius:4px;" data-v-ac703bff></div><div class="building" style="top:45%;left:55%;width:50px;height:70px;border-radius:4px;" data-v-ac703bff></div><div class="building" style="top:65%;left:25%;width:40px;height:40px;border-radius:4px;" data-v-ac703bff></div></div><div class="road-labels" data-v-ac703bff><div class="road-label" style="top:22%;left:50%;" data-v-ac703bff>九兴大道</div><div class="road-label" style="top:50%;left:22%;transform:rotate(-90deg) translate(-50%, -50%);" data-v-ac703bff>科园二路</div><div class="road-label" style="top:62%;left:60%;" data-v-ac703bff>紫瑞大道</div></div>',6)),(n(!0),l(h,null,m(P.value,e=>{var v;return n(),l("div",{key:e.id,class:g(["spot-marker",{active:((v=$.value)==null?void 0:v.id)===e.id}]),style:ge(J(e)),onClick:pe=>K(e)},[t("div",Ce,[d(i,{name:re(e.type)},null,8,["name"])]),t("div",Se,o(e.name)+" · "+o(e.distance)+"km ",1)],14,xe)}),128)),a[4]||(a[4]=t("div",{class:"current-location"},[t("div",{class:"location-pulse"}),t("div",{class:"location-dot"})],-1))]),t("div",we,[t("button",{class:"zoom-btn",onClick:W},[d(i,{name:"plus"})]),t("button",{class:"zoom-btn",onClick:G},[d(i,{name:"minus"})])]),t("div",ze,[d(_,{icon:"aim",onClick:ee,class:"locate-btn"}),d(_,{icon:"apps-o",onClick:te,class:"layers-btn"}),d(_,{icon:"plus",onClick:se,class:"add-spot-btn"},{default:y(()=>a[5]||(a[5]=[b(" 发布钓点 ",-1)])),_:1,__:[5]})]),a[6]||(a[6]=t("div",{class:"map-scale"},[t("div",{class:"scale-line"}),t("span",null,"500m")],-1))])]),t("div",Pe,[t("div",Me,[(n(),l(h,null,m(F,e=>t("div",{key:e.key,class:g(["filter-tab",{active:r.value===e.key}]),onClick:v=>A(e.key)},[b(o(e.label)+" ",1),e.hasDropdown?(n(),X(i,{key:0,name:"arrow-down"})):f("",!0)],10,je)),64))])]),t("div",{class:g(["spots-list-container",{"list-hidden":!D.value}])},[t("div",{class:"hide-button",onClick:de},a[7]||(a[7]=[t("div",{class:"handle-bar"},null,-1)])),t("div",$e,[t("div",De,[(n(),l(h,null,m(F,e=>t("div",{key:e.key,class:g(["filter-button",{active:r.value===e.key}]),onClick:v=>A(e.key)},[b(o(e.label)+" ",1),e.hasDropdown?(n(),X(i,{key:0,name:"arrow-down"})):f("",!0)],10,Oe)),64))]),t("div",Ve,[t("div",Ne,"共"+o(P.value.length)+"个钓点",1)]),t("div",Te,[(n(!0),l(h,null,m(I.value,(e,v)=>(n(),l("div",{key:e.id,class:"spot-card-item",onClick:pe=>ae(e)},[t("div",Le,[t("img",{src:e.images[0],alt:"钓点图片"},null,8,Be)]),t("div",Ie,[t("div",Ae,[t("h3",He,o(e.name),1)]),t("div",Xe,[a[8]||(a[8]=t("span",{class:"species-label"},"鱼种：",-1)),t("span",Ue,o(e.fishSpecies.join("、")),1)]),t("div",Ze,[t("span",qe,o(e.type),1),t("span",Ee,o(e.distance)+"km",1)])])],8,Fe))),128))])])],2),d(O,{show:u.value,"onUpdate:show":a[1]||(a[1]=e=>u.value=e),position:"bottom",style:{maxHeight:"70%"}},{default:y(()=>[t("div",Re,[t("div",Ye,[t("h3",null,o(ie(r.value)),1),d(i,{name:"cross",onClick:a[0]||(a[0]=e=>u.value=!1)})]),t("div",Qe,[r.value==="nearby"?(n(),l("div",We,[(n(),l(h,null,m(q,e=>t("div",{key:e.value,class:g(["filter-option",{active:C.value===e.value}]),onClick:v=>ne(e.value)},o(e.text),11,Ge)),64))])):f("",!0),r.value==="sort"?(n(),l("div",Je,[(n(),l(h,null,m(E,e=>t("div",{key:e.value,class:g(["filter-option",{active:j.value===e.value}]),onClick:v=>le(e.value)},o(e.text),11,Ke)),64))])):f("",!0),r.value==="type"?(n(),l("div",et,[(n(),l(h,null,m(R,e=>t("div",{key:e.value,class:g(["filter-option",{active:S.value===e.value}]),onClick:v=>oe(e.value)},o(e.text),11,tt)),64))])):f("",!0),r.value==="fish"?(n(),l("div",at,[(n(),l(h,null,m(Y,e=>t("div",{key:e.value,class:g(["filter-option",{active:w.value===e.value}]),onClick:v=>ce(e.value)},o(e.text),11,st)),64))])):f("",!0)])])]),_:1},8,["show"]),d(V,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e),onChange:Q,fixed:"",placeholder:""},{default:y(()=>[d(M,{icon:"home-o",to:"/home"},{default:y(()=>a[9]||(a[9]=[b("首页",-1)])),_:1,__:[9]}),d(M,{icon:"user-o",to:"/profile"},{default:y(()=>a[10]||(a[10]=[b("我的",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])])}}});const dt=_e(it,[["__scopeId","data-v-ac703bff"]]);export{dt as default};

import{l as e,r as a,c as l,f as s,L as t,k as i,R as n,Q as o,W as r,S as d,y as c,F as v,V as u,Y as p,X as y,M as g,Z as m,N as h,O as w,B as f}from"./vendor-788d0564.js";import{F as k}from"./fishing-a433fcef.js";import{a as _}from"./vant-7a9d22a8.js";import{_ as b}from"./_plugin-vue_export-helper-1b428a4d.js";const C={class:"spot-detail-page"},I={key:0,class:"loading-container"},L={key:1,class:"spot-content"},z={class:"spot-images"},j=["src","alt"],D={key:1,class:"no-image"},S={class:"spot-basic-info"},T={class:"spot-header"},A={class:"spot-name"},R={class:"address-section"},x={class:"address"},E={class:"fish-species-section"},V={class:"fish-tags"},$={class:"description-section"},P={class:"description-text"},Q={class:"weather-section"},B={class:"weather-main"},F={class:"weather-left"},K={class:"temperature"},O={class:"weather-desc"},U={class:"weather-details"},W={class:"weather-item"},M={class:"value"},H={class:"weather-item"},N={class:"value"},X={class:"weather-item"},Y={class:"value"},Z={class:"weather-item"},q={class:"click-hint"},G={key:0,class:"hydrology-section"},J={class:"hydrology-header"},ee={class:"update-time"},ae={class:"hydrology-main"},le={class:"hydrology-item"},se={class:"hydrology-content"},te={class:"hydrology-value"},ie={class:"hydrology-item"},ne={class:"hydrology-content"},oe={class:"hydrology-value"},re={class:"hydrology-item"},de={class:"hydrology-content"},ce={class:"hydrology-item"},ve={class:"hydrology-content"},ue={class:"hydrology-value"},pe={class:"click-hint"},ye={class:"strategy-section"},ge={class:"strategy-header"},me={class:"strategy-list"},he={class:"review-header"},we=["src"],fe={class:"reviewer-info"},ke={class:"reviewer-name"},_e={class:"review-time"},be={class:"review-content"},Ce={key:0,class:"review-images"},Ie=["src"],Le={class:"review-actions"},ze={key:0,class:"no-strategy"},je={class:"strategy-dialog"},De={class:"dialog-header"},Se={class:"image-upload"},Te={key:2,class:"error-container"},Ae={key:3,class:"bottom-actions"},Re=b(e({__name:"SpotDetail",setup(e){const b=g(),Re=m(),xe=a(!0),Ee=a(null),Ve=a(!1),$e=a([]),Pe=a({content:"",images:[]}),Qe=a(!1),Be=a({temperature:22,humidity:65,pressure:1013,windSpeed:3.2,windDirection:"东南风",weather:"多云",suitabilityIndex:8}),Fe=l(()=>Re.params.id),Ke={spot_1:{id:"spot_1",name:"翠湖公园钓点",type:k.LAKE,latitude:39.9042,longitude:116.4074,address:"北京市海淀区翠湖公园内",city:"北京",description:"翠湖公园钓点位于北京市海淀区，是一个环境优美的城市湖泊钓点。湖水清澈，周围绿树成荫，空气清新，是休闲垂钓的绝佳选择。",images:["https://img.yzcdn.cn/vant/apple-1.jpg","https://img.yzcdn.cn/vant/apple-2.jpg","https://img.yzcdn.cn/vant/apple-3.jpg"],rating:4.5,reviewCount:128,fishSpecies:["鲫鱼","草鱼","鲤鱼","白条"],createdBy:"user_1",createdAt:new Date,approved:!0,currentPeople:8,distance:2.3,hydrologyInfo:{updateTime:"2023-10-26 10:00",waterLevel:1.2,waterTemperature:22,waterQuality:"良好",waterClarity:60}},spot_2:{id:"spot_2",name:"天鹅湖钓点",type:k.RESERVOIR,latitude:39.9142,longitude:116.4174,address:"北京市朝阳区天鹅湖公园",city:"北京",description:"天鹅湖钓点环境优美，水质清澈，是城市中难得的垂钓胜地。",images:["https://img.yzcdn.cn/vant/apple-4.jpg","https://img.yzcdn.cn/vant/apple-5.jpg"],rating:4.3,reviewCount:89,fishSpecies:["鲫鱼","鲤鱼","鲢鱼"],createdBy:"user_2",createdAt:new Date,approved:!0,currentPeople:5,distance:3.1,hydrologyInfo:{updateTime:"2023-10-26 11:30",waterLevel:1.8,waterTemperature:20,waterQuality:"良好",waterClarity:70}}},Oe=[{id:"review_1",userId:"user_2",username:"钓鱼达人",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:"这个钓点真的很不错！环境优美，鱼儿也很活跃。今天用玉米粒钓了3条草鱼，最大的有2.5公斤。推荐大家来试试！",createdAt:new Date(Date.now()-1728e5),likes:15,rating:5,images:["https://img.yzcdn.cn/vant/apple-1.jpg"],isLiked:!1},{id:"review_2",userId:"user_3",username:"湖边老王",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:"设施很完善，停车方便，就是人有点多。建议早点来占位置。",createdAt:new Date(Date.now()-432e6),likes:8,rating:4,isLiked:!0}],Ue=e=>{const a=(new Date).getTime()-e.getTime(),l=Math.floor(a/864e5);return 0===l?"今天":1===l?"昨天":l<7?`${l}天前`:e.toLocaleDateString()},We=e=>{const a=new Date(e);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},Me=e=>{switch(e){case"良好":return"good";case"一般":return"fair";case"较差":return"poor";default:return""}},He=()=>{_("分享功能开发中")},Ne=()=>{Ee.value&&b.push(`/spot/${Ee.value.id}/weather`)},Xe=()=>{Ee.value&&b.push(`/spot/${Ee.value.id}/water`)},Ye=()=>{_("水文信息刷新功能开发中")},Ze=e=>{console.log("上传文件:",e),_("图片上传功能开发中")},qe=()=>{Qe.value=!Qe.value,_(Qe.value?"收藏成功":"取消收藏")},Ge=()=>{if(Ee.value){const{latitude:e,longitude:a}=Ee.value,l=`https://uri.amap.com/navigation?to=${a},${e}&mode=car&policy=1&src=myapp&coordinate=gaode&callnative=0`;window.open(l,"_blank"),_("正在打开导航")}},Je=()=>{if(!Pe.value.content.trim())return void _("请输入评价内容");const e={id:`review_${Date.now()}`,userId:"current_user",username:"我",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",content:Pe.value.content,createdAt:new Date,likes:0,rating:5,images:[],isLiked:!1};$e.value.unshift(e),Ve.value=!1,_("评价发布成功"),Pe.value={content:"",images:[]}};return s(async()=>{try{await new Promise(e=>setTimeout(e,1e3));const e=Ke[Fe.value];e?(Ee.value=e,$e.value=[...Oe]):_("钓点信息未找到")}catch(e){_("加载失败")}finally{xe.value=!1}}),(e,a)=>{var l;const s=h("van-icon"),g=h("van-nav-bar"),m=h("van-loading"),b=h("van-swipe-item"),Re=h("van-swipe"),Fe=h("van-button"),Ke=h("van-tag"),Oe=h("van-empty"),ea=h("van-field"),aa=h("van-uploader"),la=h("van-popup");return w(),t("div",C,[i(g,{title:(null==(l=Ee.value)?void 0:l.name)||"钓点详情","left-arrow":"",onClickLeft:a[0]||(a[0]=a=>e.$router.back())},{right:n(()=>[i(s,{name:"share-o",onClick:He})]),_:1},8,["title"]),xe.value?(w(),t("div",I,[i(m,{size:"24px",vertical:""},{default:n(()=>[...a[6]||(a[6]=[f("加载中...",-1)])]),_:1})])):Ee.value?(w(),t("div",L,[o("div",z,[Ee.value.images&&Ee.value.images.length>0?(w(),r(Re,{key:0,autoplay:3e3,"indicator-color":"white"},{default:n(()=>[(w(!0),t(v,null,u(Ee.value.images,(e,a)=>(w(),r(b,{key:a},{default:n(()=>[o("img",{src:e,alt:`${Ee.value.name} 图片${a+1}`,class:"spot-image"},null,8,j)]),_:2},1024))),128))]),_:1})):(w(),t("div",D,[i(s,{name:"photo-o",size:"48"}),a[7]||(a[7]=o("p",null,"暂无图片",-1))]))]),o("div",S,[o("div",T,[o("h1",A,d(Ee.value.name),1),o("div",{class:c(["spot-type-badge",Ee.value.type])},d((ta=Ee.value.type,{[k.FRESHWATER]:"淡水",[k.SALTWATER]:"海水",[k.BLACK_PIT]:"黑坑",[k.RESERVOIR]:"水库",[k.RIVER]:"河流",[k.LAKE]:"湖泊"}[ta]||"未知")),3)]),o("div",R,[i(s,{name:"location-o"}),o("span",x,d(Ee.value.address),1),i(Fe,{type:"primary",size:"small",onClick:Ge},{default:n(()=>[...a[8]||(a[8]=[f(" 导航 ",-1)])]),_:1})])]),o("div",E,[a[9]||(a[9]=o("h3",null,"可钓鱼种",-1)),o("div",V,[(w(!0),t(v,null,u(Ee.value.fishSpecies,e=>(w(),r(Ke,{key:e,type:"primary",plain:"",class:"fish-tag"},{default:n(()=>[f(" 🐟 "+d(e),1)]),_:2},1024))),128))])]),o("div",$,[a[10]||(a[10]=o("h3",null,"钓点介绍",-1)),o("p",P,d(Ee.value.description),1)]),o("div",Q,[a[17]||(a[17]=o("h3",null,"天气信息",-1)),o("div",{class:"weather-card",onClick:Ne},[o("div",B,[o("div",F,[o("div",K,d(Be.value.temperature)+"°C",1),o("div",O,d(Be.value.weather),1)]),a[11]||(a[11]=o("div",{class:"weather-right"},[o("div",{class:"weather-icon"},"🌤️")],-1))]),o("div",U,[o("div",W,[a[12]||(a[12]=o("span",{class:"label"},"湿度",-1)),o("span",M,d(Be.value.humidity)+"%",1)]),o("div",H,[a[13]||(a[13]=o("span",{class:"label"},"气压",-1)),o("span",N,d(Be.value.pressure)+"hPa",1)]),o("div",X,[a[14]||(a[14]=o("span",{class:"label"},"风速",-1)),o("span",Y,d(Be.value.windSpeed)+"m/s",1)]),o("div",Z,[a[15]||(a[15]=o("span",{class:"label"},"适钓指数",-1)),o("span",{class:c(["value suitability",(sa=Be.value.suitabilityIndex,sa>=8?"excellent":sa>=6?"good":sa>=4?"fair":"poor")])},d(Be.value.suitabilityIndex)+"/10 ",3)])]),o("div",q,[i(s,{name:"arrow"}),a[16]||(a[16]=o("span",null,"点击查看详细天气信息",-1))])])]),Ee.value.hydrologyInfo?(w(),t("div",G,[a[28]||(a[28]=o("h3",null,"水文信息",-1)),o("div",{class:"hydrology-card",onClick:Xe},[o("div",J,[o("div",ee," 更新时间："+d(We(Ee.value.hydrologyInfo.updateTime)),1),i(Fe,{type:"primary",size:"small",onClick:p(Ye,["stop"])},{default:n(()=>[...a[18]||(a[18]=[f(" 刷新 ",-1)])]),_:1})]),o("div",ae,[o("div",le,[a[20]||(a[20]=o("div",{class:"hydrology-icon"},"🌊",-1)),o("div",se,[a[19]||(a[19]=o("div",{class:"hydrology-label"},"水位",-1)),o("div",te,d(Ee.value.hydrologyInfo.waterLevel)+"米",1)])]),o("div",ie,[a[22]||(a[22]=o("div",{class:"hydrology-icon"},"🌡️",-1)),o("div",ne,[a[21]||(a[21]=o("div",{class:"hydrology-label"},"水温",-1)),o("div",oe,d(Ee.value.hydrologyInfo.waterTemperature)+"°C",1)])]),o("div",re,[a[24]||(a[24]=o("div",{class:"hydrology-icon"},"💧",-1)),o("div",de,[a[23]||(a[23]=o("div",{class:"hydrology-label"},"水质",-1)),o("div",{class:c(["hydrology-value",Me(Ee.value.hydrologyInfo.waterQuality)])},d(Ee.value.hydrologyInfo.waterQuality),3)])]),o("div",ce,[a[26]||(a[26]=o("div",{class:"hydrology-icon"},"👁️",-1)),o("div",ve,[a[25]||(a[25]=o("div",{class:"hydrology-label"},"透明度",-1)),o("div",ue,d(Ee.value.hydrologyInfo.waterClarity)+"cm",1)])])]),o("div",pe,[i(s,{name:"arrow"}),a[27]||(a[27]=o("span",null,"点击查看详细水文信息",-1))])])])):y("",!0),o("div",ye,[o("div",ge,[o("h3",null,"钓点攻略 ("+d($e.value.length)+")",1),i(Fe,{type:"primary",size:"small",onClick:a[1]||(a[1]=e=>Ve.value=!0)},{default:n(()=>[...a[29]||(a[29]=[f(" 分享攻略 ",-1)])]),_:1})]),o("div",me,[(w(!0),t(v,null,u($e.value,e=>{var a;return w(),t("div",{key:e.id,class:"strategy-item"},[o("div",he,[o("img",{src:e.avatar,alt:"头像",class:"reviewer-avatar"},null,8,we),o("div",fe,[o("div",ke,d(e.username),1),o("div",_e,d(Ue(e.createdAt)),1)])]),o("div",be,d(e.content),1),(null==(a=e.images)?void 0:a.length)?(w(),t("div",Ce,[(w(!0),t(v,null,u(e.images,(e,a)=>(w(),t("img",{key:a,src:e,alt:"评价图片",class:"review-image"},null,8,Ie))),128))])):y("",!0),o("div",Le,[i(Fe,{type:"default",size:"mini",icon:e.isLiked?"like":"like-o",onClick:a=>(e=>{e.isLiked=!e.isLiked,e.likes+=e.isLiked?1:-1,_(e.isLiked?"点赞成功":"取消点赞")})(e)},{default:n(()=>[f(d(e.likes),1)]),_:2},1032,["icon","onClick"])])])}),128))]),0===$e.value.length?(w(),t("div",ze,[i(Oe,{description:"暂无攻略"},{default:n(()=>[i(Fe,{type:"primary",onClick:a[2]||(a[2]=e=>Ve.value=!0)},{default:n(()=>[...a[30]||(a[30]=[f(" 分享第一条攻略 ",-1)])]),_:1})]),_:1})])):y("",!0)])])):y("",!0),i(la,{show:Ve.value,"onUpdate:show":a[5]||(a[5]=e=>Ve.value=e),position:"bottom",style:{height:"70%"}},{default:n(()=>[o("div",je,[o("div",De,[a[32]||(a[32]=o("h3",null,"分享攻略",-1)),i(Fe,{type:"primary",size:"small",onClick:Je},{default:n(()=>[...a[31]||(a[31]=[f("发布",-1)])]),_:1})]),i(ea,{modelValue:Pe.value.content,"onUpdate:modelValue":a[3]||(a[3]=e=>Pe.value.content=e),type:"textarea",placeholder:"分享你的钓鱼攻略和技巧...",rows:"4",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),o("div",Se,[i(aa,{modelValue:Pe.value.images,"onUpdate:modelValue":a[4]||(a[4]=e=>Pe.value.images=e),multiple:"","max-count":3,"after-read":Ze},null,8,["modelValue"])])])]),_:1},8,["show"]),xe.value||Ee.value?y("",!0):(w(),t("div",Te,[i(Oe,{description:"钓点信息加载失败"})])),Ee.value?(w(),t("div",Ae,[i(Fe,{icon:Qe.value?"star":"star-o",type:Qe.value?"warning":"default",size:"large",class:"action-btn collect-btn",onClick:qe},{default:n(()=>[f(d(Qe.value?"已收藏":"收藏"),1)]),_:1},8,["icon","type"]),i(Fe,{icon:"guide-o",type:"primary",size:"large",class:"action-btn navigate-btn",onClick:Ge},{default:n(()=>[...a[33]||(a[33]=[f(" 导航 ",-1)])]),_:1})])):y("",!0)]);var sa,ta}}}),[["__scopeId","data-v-40c38e72"]]);export{Re as default};

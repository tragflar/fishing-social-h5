import{l as N,a as $,r as p,L as B,k as a,R as s,Q as r,M as E,N as n,O as z,B as A}from"./vendor-38d0e5c9.js";import{d as R,a as d}from"./vant-d7f3bedd.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const q={class:"edit-profile-page"},D={class:"edit-content"},L={class:"avatar-section"},O={class:"avatar-wrapper"},j=["src"],I={class:"avatar-upload-popup"},M={class:"upload-tip"},Q=N({__name:"EditProfile",setup(G){const y=E(),o=$({username:"钓鱼老司机",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",bio:"热爱钓鱼的老司机，专攻野钓，喜欢分享钓鱼心得",city:"北京",favoriteFish:"鲫鱼、鲤鱼",favoriteSpot:"野钓、水库",fishingStyle:"台钓"}),m=p(!1),v=p(!1),u=p(!1),f=p([]),b=[{text:"北京",value:"北京"},{text:"上海",value:"上海"},{text:"广州",value:"广州"},{text:"深圳",value:"深圳"},{text:"杭州",value:"杭州"},{text:"南京",value:"南京"},{text:"成都",value:"成都"},{text:"武汉",value:"武汉"},{text:"西安",value:"西安"},{text:"重庆",value:"重庆"}],w=({selectedOptions:l})=>{const e=l[0];o.city=e.text,u.value=!1},x=l=>{console.log("上传头像:",l),o.avatar=l.content||l.url,d("头像上传成功"),v.value=!1},h=()=>new Promise(l=>{l(!0)}),k=()=>o.username.trim()?o.username.length<2?(d("用户名至少2个字符"),!1):o.username.length>20?(d("用户名不能超过20个字符"),!1):!0:(d("请输入用户名"),!1),c=async()=>{if(k()){m.value=!0;try{await new Promise(l=>setTimeout(l,1500)),R({type:"success",message:"资料保存成功！"}),y.back()}catch{d("保存失败，请重试")}finally{m.value=!1}}};return(l,e)=>{const C=n("van-button"),U=n("van-nav-bar"),_=n("van-icon"),i=n("van-field"),V=n("van-cell-group"),P=n("van-form"),S=n("van-uploader"),g=n("van-popup"),F=n("van-picker");return z(),B("div",q,[a(U,{title:"编辑资料","left-arrow":"",onClickLeft:e[0]||(e[0]=t=>l.$router.back())},{right:s(()=>[a(C,{type:"primary",size:"small",loading:m.value,onClick:c},{default:s(()=>e[13]||(e[13]=[A(" 保存 ",-1)])),_:1,__:[13]},8,["loading"])]),_:1}),r("div",D,[a(P,{onSubmit:c},{default:s(()=>[r("div",L,[r("div",O,[r("img",{src:o.avatar,alt:"头像",class:"avatar-preview"},null,8,j),a(_,{name:"photograph",class:"avatar-upload-icon",onClick:e[1]||(e[1]=t=>v.value=!0)})]),e[14]||(e[14]=r("div",{class:"avatar-tip"},"点击更换头像",-1))]),a(V,{title:"基本信息"},{default:s(()=>[a(i,{modelValue:o.username,"onUpdate:modelValue":e[2]||(e[2]=t=>o.username=t),label:"用户名",placeholder:"请输入用户名",required:"",rules:[{required:!0,message:"请输入用户名"}]},null,8,["modelValue"]),a(i,{modelValue:o.bio,"onUpdate:modelValue":e[3]||(e[3]=t=>o.bio=t),label:"个人简介",type:"textarea",placeholder:"介绍一下自己吧...",rows:"3",maxlength:"100","show-word-limit":""},null,8,["modelValue"]),a(i,{modelValue:o.city,"onUpdate:modelValue":e[4]||(e[4]=t=>o.city=t),label:"所在城市",placeholder:"请选择城市",readonly:"",onClick:e[5]||(e[5]=t=>u.value=!0)},null,8,["modelValue"])]),_:1}),a(V,{title:"钓鱼偏好"},{default:s(()=>[a(i,{modelValue:o.favoriteFish,"onUpdate:modelValue":e[6]||(e[6]=t=>o.favoriteFish=t),label:"最爱鱼种",placeholder:"如：鲫鱼、鲤鱼、草鱼等"},null,8,["modelValue"]),a(i,{modelValue:o.favoriteSpot,"onUpdate:modelValue":e[7]||(e[7]=t=>o.favoriteSpot=t),label:"最爱钓点类型",placeholder:"如：野钓、黑坑、水库等"},null,8,["modelValue"]),a(i,{modelValue:o.fishingStyle,"onUpdate:modelValue":e[8]||(e[8]=t=>o.fishingStyle=t),label:"钓鱼风格",placeholder:"如：台钓、路亚、传统钓等"},null,8,["modelValue"])]),_:1})]),_:1})]),a(g,{show:v.value,"onUpdate:show":e[10]||(e[10]=t=>v.value=t),position:"bottom",style:{height:"40%"}},{default:s(()=>[r("div",I,[a(S,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=t=>f.value=t),"max-count":1,"after-read":x,"before-delete":h},{default:s(()=>[r("div",M,[a(_,{name:"photograph",size:"24"}),e[15]||(e[15]=r("p",null,"上传头像",-1))])]),_:1},8,["modelValue"])])]),_:1},8,["show"]),a(g,{show:u.value,"onUpdate:show":e[12]||(e[12]=t=>u.value=t),position:"bottom"},{default:s(()=>[a(F,{columns:b,onConfirm:w,onCancel:e[11]||(e[11]=t=>u.value=!1)})]),_:1},8,["show"])])}}});const W=T(Q,[["__scopeId","data-v-530aa44f"]]);export{W as default};

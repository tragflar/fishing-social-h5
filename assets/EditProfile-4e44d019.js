import{l as e,a,r as l,L as t,k as o,R as u,Q as s,M as n,N as r,O as i,B as d}from"./vendor-1eb17f0c.js";import{d as v,a as p}from"./vant-1b65eea4.js";import{_ as m}from"./_plugin-vue_export-helper-1b428a4d.js";const c={class:"edit-profile-page"},f={class:"edit-content"},h={class:"avatar-section"},g={class:"avatar-wrapper"},V=["src"],b={class:"avatar-upload-popup"},y={class:"upload-tip"},_=m(e({__name:"EditProfile",setup(e){const m=n(),_=a({username:"钓鱼老司机",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",bio:"热爱钓鱼的老司机，专攻野钓，喜欢分享钓鱼心得",city:"北京",favoriteFish:"鲫鱼、鲤鱼",favoriteSpot:"野钓、水库",fishingStyle:"台钓"}),x=l(!1),w=l(!1),U=l(!1),k=l([]),S=[{text:"北京",value:"北京"},{text:"上海",value:"上海"},{text:"广州",value:"广州"},{text:"深圳",value:"深圳"},{text:"杭州",value:"杭州"},{text:"南京",value:"南京"},{text:"成都",value:"成都"},{text:"武汉",value:"武汉"},{text:"西安",value:"西安"},{text:"重庆",value:"重庆"}],C=({selectedOptions:e})=>{const a=e[0];_.city=a.text,U.value=!1},j=e=>{console.log("上传头像:",e),_.avatar=e.content||e.url,p("头像上传成功"),w.value=!1},z=()=>new Promise(e=>{e(!0)}),F=async()=>{if(_.username.trim()?_.username.length<2?(p("用户名至少2个字符"),0):!(_.username.length>20&&(p("用户名不能超过20个字符"),1)):(p("请输入用户名"),0)){x.value=!0;try{await new Promise(e=>setTimeout(e,1500)),v({type:"success",message:"资料保存成功！"}),m.back()}catch(e){p("保存失败，请重试")}finally{x.value=!1}}};return(e,a)=>{const l=r("van-button"),n=r("van-nav-bar"),v=r("van-icon"),p=r("van-field"),m=r("van-cell-group"),P=r("van-form"),q=r("van-uploader"),L=r("van-popup"),O=r("van-picker");return i(),t("div",c,[o(n,{title:"编辑资料","left-arrow":"",onClickLeft:a[0]||(a[0]=a=>e.$router.back())},{right:u(()=>[o(l,{type:"primary",size:"small",loading:x.value,onClick:F},{default:u(()=>a[13]||(a[13]=[d(" 保存 ",-1)])),_:1,__:[13]},8,["loading"])]),_:1}),s("div",f,[o(P,{onSubmit:F},{default:u(()=>[s("div",h,[s("div",g,[s("img",{src:_.avatar,alt:"头像",class:"avatar-preview"},null,8,V),o(v,{name:"photograph",class:"avatar-upload-icon",onClick:a[1]||(a[1]=e=>w.value=!0)})]),a[14]||(a[14]=s("div",{class:"avatar-tip"},"点击更换头像",-1))]),o(m,{title:"基本信息"},{default:u(()=>[o(p,{modelValue:_.username,"onUpdate:modelValue":a[2]||(a[2]=e=>_.username=e),label:"用户名",placeholder:"请输入用户名",required:"",rules:[{required:!0,message:"请输入用户名"}]},null,8,["modelValue"]),o(p,{modelValue:_.bio,"onUpdate:modelValue":a[3]||(a[3]=e=>_.bio=e),label:"个人简介",type:"textarea",placeholder:"介绍一下自己吧...",rows:"3",maxlength:"100","show-word-limit":""},null,8,["modelValue"]),o(p,{modelValue:_.city,"onUpdate:modelValue":a[4]||(a[4]=e=>_.city=e),label:"所在城市",placeholder:"请选择城市",readonly:"",onClick:a[5]||(a[5]=e=>U.value=!0)},null,8,["modelValue"])]),_:1}),o(m,{title:"钓鱼偏好"},{default:u(()=>[o(p,{modelValue:_.favoriteFish,"onUpdate:modelValue":a[6]||(a[6]=e=>_.favoriteFish=e),label:"最爱鱼种",placeholder:"如：鲫鱼、鲤鱼、草鱼等"},null,8,["modelValue"]),o(p,{modelValue:_.favoriteSpot,"onUpdate:modelValue":a[7]||(a[7]=e=>_.favoriteSpot=e),label:"最爱钓点类型",placeholder:"如：野钓、黑坑、水库等"},null,8,["modelValue"]),o(p,{modelValue:_.fishingStyle,"onUpdate:modelValue":a[8]||(a[8]=e=>_.fishingStyle=e),label:"钓鱼风格",placeholder:"如：台钓、路亚、传统钓等"},null,8,["modelValue"])]),_:1})]),_:1})]),o(L,{show:w.value,"onUpdate:show":a[10]||(a[10]=e=>w.value=e),position:"bottom",style:{height:"40%"}},{default:u(()=>[s("div",b,[o(q,{modelValue:k.value,"onUpdate:modelValue":a[9]||(a[9]=e=>k.value=e),"max-count":1,"after-read":j,"before-delete":z},{default:u(()=>[s("div",y,[o(v,{name:"photograph",size:"24"}),a[15]||(a[15]=s("p",null,"上传头像",-1))])]),_:1},8,["modelValue"])])]),_:1},8,["show"]),o(L,{show:U.value,"onUpdate:show":a[12]||(a[12]=e=>U.value=e),position:"bottom"},{default:u(()=>[o(O,{columns:S,onConfirm:C,onCancel:a[11]||(a[11]=e=>U.value=!1)})]),_:1},8,["show"])])}}}),[["__scopeId","data-v-530aa44f"]]);export{_ as default};

import{l as a,r as e,c as s,f as i,L as t,k as c,R as n,Q as l,S as r,A as o,M as d,N as u,O as v,F as h,V as k,y,u as f,X as p,W as g,B as R}from"./vendor-1eb17f0c.js";import{a as E,b as m}from"./fishing-160c5bf9.js";import{b as _,a as C}from"./vant-1b65eea4.js";import{_ as b}from"./_plugin-vue_export-helper-1b428a4d.js";const A=[{id:"crucian_carp",name:"鲫鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"常见的淡水鱼类，适应性强，分布广泛",habitat:["湖泊","水库","河流"],season:["春季","秋季"]},{id:"grass_carp",name:"草鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"草食性鱼类，体型较大，肉质鲜美",habitat:["湖泊","水库","河流"],season:["夏季","秋季"]},{id:"common_carp",name:"鲤鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"经典的淡水鱼类，钓获难度适中",habitat:["湖泊","水库","河流"],season:["春季","秋季"]},{id:"silver_carp",name:"白鲢",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"滤食性鱼类，体型较大",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"bighead_carp",name:"花鲢",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"头部较大，肉质鲜美",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"white_striped_bass",name:"白条",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.COMMON,description:"小型鱼类，数量众多",habitat:["河流","溪流"],season:["全年"]},{id:"black_fish",name:"黑鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.RARE,description:"肉食性鱼类，体型较大，钓获难度高",habitat:["湖泊","水库","河流"],season:["夏季","秋季"]},{id:"snakehead",name:"鳢鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.RARE,description:"凶猛的肉食性鱼类",habitat:["湖泊","水库"],season:["夏季","秋季"]},{id:"mandarin_fish",name:"鳜鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.RARE,description:"珍贵的淡水鱼类，肉质鲜美",habitat:["湖泊","水库"],season:["春季","秋季"]},{id:"perch",name:"鲈鱼",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.RARE,description:"肉食性鱼类，钓获难度较高",habitat:["湖泊","水库"],season:["春季","秋季"]},{id:"chinese_sturgeon",name:"中华鲟",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.EPIC,description:"国家一级保护动物，极其珍贵",habitat:["长江"],season:["春季"]},{id:"yangtze_sturgeon",name:"长江鲟",icon:"🐟",lockedIcon:"",category:E.FRESHWATER,rarity:m.EPIC,description:"长江特有物种，极其稀有",habitat:["长江"],season:["春季"]},{id:"sea_bass",name:"海鲈",icon:"🐟",lockedIcon:"",category:E.SALTWATER,rarity:m.RARE,description:"海水鱼类，肉质鲜美",habitat:["近海","海湾"],season:["春季","秋季"]},{id:"yellow_croaker",name:"黄鱼",icon:"🐟",lockedIcon:"",category:E.SALTWATER,rarity:m.COMMON,description:"常见的海水鱼类",habitat:["近海"],season:["春季","秋季"]},{id:"red_snapper",name:"红鲷",icon:"🐟",lockedIcon:"",category:E.SALTWATER,rarity:m.RARE,description:"珍贵的海水鱼类",habitat:["深海"],season:["全年"]}],I={[m.COMMON]:A.filter(a=>a.rarity===m.COMMON),[m.RARE]:A.filter(a=>a.rarity===m.RARE),[m.EPIC]:A.filter(a=>a.rarity===m.EPIC),[m.LEGENDARY]:A.filter(a=>a.rarity===m.LEGENDARY)};E.FRESHWATER,A.filter(a=>a.category===E.FRESHWATER),E.SALTWATER,A.filter(a=>a.category===E.SALTWATER),E.LAKE,A.filter(a=>a.category===E.LAKE),E.RIVER,A.filter(a=>a.category===E.RIVER);const O=a=>({[m.COMMON]:"常见",[m.RARE]:"稀有",[m.EPIC]:"史诗",[m.LEGENDARY]:"传说"}[a]),S=a=>{try{const e=localStorage.getItem(`fishProgress_${a}`);if(e){const a=JSON.parse(e);return Object.keys(a.unlockedFish).forEach(e=>{a.unlockedFish[e].firstCatchDate&&(a.unlockedFish[e].firstCatchDate=new Date(a.unlockedFish[e].firstCatchDate))}),a}}catch(e){console.error("读取鱼类解锁进度失败:",e)}return{userId:a,unlockedFish:{},totalUnlocked:0}},U=(a,e)=>{const s=S(a).unlockedFish[e];return{fishId:e,isUnlocked:(null==s?void 0:s.isUnlocked)||!1,firstCatchDate:null==s?void 0:s.firstCatchDate,totalCatchCount:(null==s?void 0:s.totalCatchCount)||0}},F={class:"fish-guide-page"},M={class:"progress-section"},T={class:"progress-header"},W={class:"progress-text"},N={class:"progress-bar"},L={class:"progress-percentage"},w={class:"filter-section"},H={class:"filter-tabs"},D={class:"fish-grid"},P=["onClick"],V={class:"fish-icon"},j={class:"fish-name"},G={key:0,class:"unlock-badge"},x={class:"fish-grid"},Y=["onClick"],$={class:"fish-icon"},K={class:"fish-name"},z={key:0,class:"unlock-badge"},B={class:"fish-grid"},J=["onClick"],Q={class:"fish-icon"},X={class:"fish-name"},q={key:0,class:"unlock-badge"},Z={class:"fish-grid"},aa=["onClick"],ea={class:"fish-icon"},sa={class:"fish-name"},ia={key:0,class:"unlock-badge"},ta={key:0,class:"fish-detail"},ca={class:"detail-header"},na={class:"fish-info"},la={class:"fish-icon-large"},ra={class:"fish-details"},oa={class:"detail-content"},da={key:0,class:"unlock-info"},ua={class:"info-item"},va={class:"value"},ha={class:"info-item"},ka={class:"value"},ya={key:1,class:"locked-info"},fa={key:2,class:"fish-description"},pa={key:3,class:"fish-habitat"},ga={class:"habitat-tags"},Ra={key:4,class:"fish-season"},Ea={class:"season-tags"},ma=b(a({__name:"FishGuide",setup(a){d();const E=e(""),b=e("all"),ma=e(!1),_a=e(!1),Ca=e(null),ba=[{name:"重置解锁进度",color:"#ee0a24"},{name:"关于图鉴",color:"#1989fa"}],Aa=s(()=>(a=>{const e=S(a);return{totalUnlocked:e.totalUnlocked,totalFish:15,unlockPercentage:Math.round(e.totalUnlocked/15*100)}})("current_user")),Ia=s(()=>E.value?A.filter(a=>a.name.toLowerCase().includes(E.value.toLowerCase())):A),Oa=s(()=>I[m.COMMON]),Sa=s(()=>I[m.RARE]),Ua=s(()=>I[m.EPIC]),Fa=()=>{},Ma=a=>{b.value=a},Ta=a=>{Ca.value=a,ma.value=!0},Wa=()=>{_a.value=!0},Na=async a=>{if("重置解锁进度"===a.name){await _({title:"确认重置",message:"这将清除所有解锁进度，确定要继续吗？"})&&C("重置功能开发中")}else"关于图鉴"===a.name&&C("图鉴功能说明开发中")};return i(()=>{}),(a,e)=>{const s=u("van-icon"),i=u("van-nav-bar"),d=u("van-search"),m=u("van-tab"),_=u("van-tabs"),C=u("van-tag"),A=u("van-popup"),I=u("van-action-sheet");return v(),t("div",F,[c(i,{title:"钓鱼图鉴","left-arrow":"",onClickLeft:e[0]||(e[0]=e=>a.$router.back())},{right:n(()=>[c(s,{name:"setting-o",onClick:Wa})]),_:1}),l("div",M,[l("div",T,[e[6]||(e[6]=l("h3",null,"解锁进度",-1)),l("span",W,r(Aa.value.totalUnlocked)+"/"+r(Aa.value.totalFish),1)]),l("div",N,[l("div",{class:"progress-fill",style:o({width:`${Aa.value.unlockPercentage}%`})},null,4)]),l("div",L,r(Aa.value.unlockPercentage)+"%",1)]),l("div",w,[c(d,{modelValue:E.value,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value=a),placeholder:"搜索鱼类名称",onSearch:Fa},null,8,["modelValue"]),l("div",H,[c(_,{active:b.value,"onUpdate:active":e[2]||(e[2]=a=>b.value=a),onChange:Ma},{default:n(()=>[c(m,{title:"全部",name:"all"},{default:n(()=>[l("div",D,[(v(!0),t(h,null,k(Ia.value,a=>(v(),t("div",{key:a.id,class:y(["fish-card",{unlocked:f(U)("current_user",a.id).isUnlocked}]),onClick:e=>Ta(a)},[l("div",V,r(f(U)("current_user",a.id).isUnlocked?a.icon:""),1),l("div",j,r(a.name),1),l("div",{class:y(["fish-rarity",a.rarity])},r(f(O)(a.rarity)),3),f(U)("current_user",a.id).isUnlocked?(v(),t("div",G," ✓ ")):p("",!0)],10,P))),128))])]),_:1}),c(m,{title:"常见",name:"common"},{default:n(()=>[l("div",x,[(v(!0),t(h,null,k(Oa.value,a=>(v(),t("div",{key:a.id,class:y(["fish-card",{unlocked:f(U)("current_user",a.id).isUnlocked}]),onClick:e=>Ta(a)},[l("div",$,r(f(U)("current_user",a.id).isUnlocked?a.icon:""),1),l("div",K,r(a.name),1),l("div",{class:y(["fish-rarity",a.rarity])},r(f(O)(a.rarity)),3),f(U)("current_user",a.id).isUnlocked?(v(),t("div",z," ✓ ")):p("",!0)],10,Y))),128))])]),_:1}),c(m,{title:"稀有",name:"rare"},{default:n(()=>[l("div",B,[(v(!0),t(h,null,k(Sa.value,a=>(v(),t("div",{key:a.id,class:y(["fish-card",{unlocked:f(U)("current_user",a.id).isUnlocked}]),onClick:e=>Ta(a)},[l("div",Q,r(f(U)("current_user",a.id).isUnlocked?a.icon:""),1),l("div",X,r(a.name),1),l("div",{class:y(["fish-rarity",a.rarity])},r(f(O)(a.rarity)),3),f(U)("current_user",a.id).isUnlocked?(v(),t("div",q," ✓ ")):p("",!0)],10,J))),128))])]),_:1}),c(m,{title:"史诗",name:"epic"},{default:n(()=>[l("div",Z,[(v(!0),t(h,null,k(Ua.value,a=>(v(),t("div",{key:a.id,class:y(["fish-card",{unlocked:f(U)("current_user",a.id).isUnlocked}]),onClick:e=>Ta(a)},[l("div",ea,r(f(U)("current_user",a.id).isUnlocked?a.icon:""),1),l("div",sa,r(a.name),1),l("div",{class:y(["fish-rarity",a.rarity])},r(f(O)(a.rarity)),3),f(U)("current_user",a.id).isUnlocked?(v(),t("div",ia," ✓ ")):p("",!0)],10,aa))),128))])]),_:1})]),_:1},8,["active"])])]),c(A,{show:ma.value,"onUpdate:show":e[4]||(e[4]=a=>ma.value=a),position:"bottom",style:{height:"70%"}},{default:n(()=>{return[Ca.value?(v(),t("div",ta,[l("div",ca,[l("div",na,[l("div",la,r(f(U)("current_user",Ca.value.id).isUnlocked?Ca.value.icon:""),1),l("div",ra,[l("h3",null,r(Ca.value.name),1),l("div",{class:y(["fish-rarity-badge",Ca.value.rarity])},r(f(O)(Ca.value.rarity)),3)])]),c(s,{name:"cross",onClick:e[3]||(e[3]=a=>ma.value=!1)})]),l("div",oa,[f(U)("current_user",Ca.value.id).isUnlocked?(v(),t("div",da,[l("div",ua,[e[7]||(e[7]=l("span",{class:"label"},"首次钓获：",-1)),l("span",va,r((a=f(U)("current_user",Ca.value.id).firstCatchDate,a?a.toLocaleDateString():"未知")),1)]),l("div",ha,[e[8]||(e[8]=l("span",{class:"label"},"总钓获：",-1)),l("span",ka,r(f(U)("current_user",Ca.value.id).totalCatchCount)+"条",1)])])):(v(),t("div",ya,e[9]||(e[9]=[l("p",null,"尚未解锁此鱼类",-1),l("p",null,"钓获此鱼类即可解锁",-1)]))),Ca.value.description?(v(),t("div",fa,[e[10]||(e[10]=l("h4",null,"鱼类介绍",-1)),l("p",null,r(Ca.value.description),1)])):p("",!0),Ca.value.habitat?(v(),t("div",pa,[e[11]||(e[11]=l("h4",null,"栖息地",-1)),l("div",ga,[(v(!0),t(h,null,k(Ca.value.habitat,a=>(v(),g(C,{key:a,type:"primary",plain:""},{default:n(()=>[R(r(a),1)]),_:2},1024))),128))])])):p("",!0),Ca.value.season?(v(),t("div",Ra,[e[12]||(e[12]=l("h4",null,"最佳钓鱼季节",-1)),l("div",Ea,[(v(!0),t(h,null,k(Ca.value.season,a=>(v(),g(C,{key:a,type:"success",plain:""},{default:n(()=>[R(r(a),1)]),_:2},1024))),128))])])):p("",!0)])])):p("",!0)];var a}),_:1},8,["show"]),c(I,{show:_a.value,"onUpdate:show":e[5]||(e[5]=a=>_a.value=a),actions:ba,onSelect:Na},null,8,["show"])])}}}),[["__scopeId","data-v-e7246027"]]);export{ma as default};

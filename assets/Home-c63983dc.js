import{l as e,r as a,c as t,f as i,L as l,Q as s,U as n,F as c,V as o,k as r,R as d,S as p,y as v,M as u,N as g,O as h,A as m,B as f,W as k,X as y}from"./vendor-1eb17f0c.js";import{a as b}from"./vant-1b65eea4.js";import{_ as x}from"./_plugin-vue_export-helper-1b428a4d.js";const _={class:"home-page"},C={class:"map-container"},w={class:"fishing-map"},j={class:"map-background"},S=["onClick"],z={class:"marker-icon"},P={class:"marker-info"},M={class:"zoom-controls"},D={class:"map-controls"},$={class:"filter-tabs"},V={class:"tab-scroll"},U=["onClick"],q={class:"list-content"},H={class:"filter-section"},I=["onClick"],A={class:"list-header"},B={class:"result-count"},F={class:"spots-list"},L=["onClick"],N={class:"spot-image"},O=["src"],Q={class:"spot-info"},R={class:"spot-header"},W={class:"spot-name"},X={class:"spot-fish-species"},E={class:"species-list"},G={class:"spot-meta"},J={class:"spot-type"},K={class:"spot-distance"},T={class:"filter-popup"},Y={class:"popup-header"},Z={class:"popup-content"},ee={key:0,class:"filter-options"},ae=["onClick"],te={key:1,class:"filter-options"},ie=["onClick"],le={key:2,class:"filter-options"},se=["onClick"],ne={key:3,class:"filter-options"},ce=["onClick"],oe=x(e({__name:"Home",setup(e){const x=u(),oe=a([{id:"spot_1",name:"金鱼池钓点",latitude:39.9042,longitude:116.4074,images:["https://img.yzcdn.cn/vant/apple-1.jpg"],description:"环境优美，水质清澈，适合各种钓法。",rating:4.8,distance:2.7,type:"lake",location:"成都市锦江区",rank:1,recentCatches:152,currentPeople:8,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_2",name:"天鹅湖钓点",latitude:39.9142,longitude:116.4174,images:["https://img.yzcdn.cn/vant/apple-2.jpg"],description:"水库环境好，鱼获丰富。",rating:4.8,distance:2.7,type:"reservoir",location:"成都市青羊区",rank:2,recentCatches:98,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","鲢鱼"]},{id:"spot_3",name:"翠湖公园钓点",latitude:39.8942,longitude:116.3974,images:["https://img.yzcdn.cn/vant/apple-3.jpg"],description:"城市中心的休闲钓点。",rating:4.9,distance:4.9,type:"lake",location:"成都市武侯区",rank:3,recentCatches:76,currentPeople:12,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_4",name:"青羊湖钓点",latitude:39.9242,longitude:116.4274,images:["https://img.yzcdn.cn/vant/apple-4.jpg"],description:"青羊区知名钓点，环境优美，鱼种丰富。",rating:4.7,distance:3.2,type:"lake",location:"成都市青羊区",rank:4,recentCatches:89,currentPeople:6,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼"]},{id:"spot_5",name:"锦江黑坑",latitude:39.8842,longitude:116.3874,images:["https://img.yzcdn.cn/vant/apple-5.jpg"],description:"专业黑坑钓场，设备齐全，适合竞技钓鱼。",rating:4.6,distance:5.1,type:"black_pit",location:"成都市锦江区",rank:5,recentCatches:134,currentPeople:15,fishSpecies:["鲫鱼","鲤鱼","草鱼","青鱼"]},{id:"spot_6",name:"双流水库",latitude:39.9342,longitude:116.4374,images:["https://img.yzcdn.cn/vant/apple-6.jpg"],description:"大型水库钓点，水质优良，适合野钓。",rating:4.9,distance:8.3,type:"reservoir",location:"成都市双流区",rank:6,recentCatches:67,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_7",name:"龙泉山溪流",latitude:39.8742,longitude:116.3774,images:["https://img.yzcdn.cn/vant/apple-7.jpg"],description:"山间溪流钓点，环境原始，适合溪流钓法。",rating:4.5,distance:12.7,type:"river",location:"成都市龙泉驿区",rank:7,recentCatches:45,currentPeople:3,fishSpecies:["马口鱼","溪石斑","小鲫鱼"]},{id:"spot_8",name:"温江鱼塘",latitude:39.9442,longitude:116.4474,images:["https://img.yzcdn.cn/vant/apple-8.jpg"],description:"专业鱼塘，鱼密度高，适合新手练习。",rating:4.4,distance:15.2,type:"lake",location:"成都市温江区",rank:8,recentCatches:156,currentPeople:18,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼"]},{id:"spot_9",name:"新都野钓场",latitude:39.8642,longitude:116.3674,images:["https://img.yzcdn.cn/vant/apple-9.jpg"],description:"野钓天堂，环境自然，鱼获丰富。",rating:4.8,distance:18.9,type:"lake",location:"成都市新都区",rank:9,recentCatches:78,currentPeople:7,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_10",name:"郫都竞技池",latitude:39.9542,longitude:116.4574,images:["https://img.yzcdn.cn/vant/apple-10.jpg"],description:"专业竞技钓场，举办各类钓鱼比赛。",rating:4.7,distance:22.1,type:"black_pit",location:"成都市郫都区",rank:10,recentCatches:92,currentPeople:12,fishSpecies:["鲫鱼","鲤鱼","草鱼","青鱼"]},{id:"spot_11",name:"都江堰灌渠",latitude:39.8442,longitude:116.3574,images:["https://img.yzcdn.cn/vant/apple-11.jpg"],description:"灌渠钓点，水流稳定，适合台钓。",rating:4.3,distance:25.6,type:"river",location:"成都市都江堰市",rank:11,recentCatches:56,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_12",name:"彭州山塘",latitude:39.9642,longitude:116.4674,images:["https://img.yzcdn.cn/vant/apple-12.jpg"],description:"山间小塘，环境幽静，适合休闲钓鱼。",rating:4.6,distance:28.3,type:"lake",location:"成都市彭州市",rank:12,recentCatches:43,currentPeople:2,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_13",name:"崇州水库",latitude:39.8342,longitude:116.3474,images:["https://img.yzcdn.cn/vant/apple-13.jpg"],description:"大型水库，水质清澈，适合各种钓法。",rating:4.8,distance:31.7,type:"reservoir",location:"成都市崇州市",rank:13,recentCatches:89,currentPeople:6,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]},{id:"spot_14",name:"大邑野钓场",latitude:39.9742,longitude:116.4774,images:["https://img.yzcdn.cn/vant/apple-14.jpg"],description:"野钓胜地，环境优美，鱼种丰富。",rating:4.7,distance:34.2,type:"lake",location:"成都市大邑县",rank:14,recentCatches:67,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_15",name:"蒲江溪流",latitude:39.8242,longitude:116.3374,images:["https://img.yzcdn.cn/vant/apple-15.jpg"],description:"溪流钓点，水流湍急，适合路亚钓法。",rating:4.4,distance:37.8,type:"river",location:"成都市蒲江县",rank:15,recentCatches:38,currentPeople:3,fishSpecies:["马口鱼","溪石斑","小鲫鱼","白条"]},{id:"spot_16",name:"新津鱼塘",latitude:39.9842,longitude:116.4874,images:["https://img.yzcdn.cn/vant/apple-16.jpg"],description:"专业鱼塘，设备完善，适合新手。",rating:4.5,distance:41.3,type:"lake",location:"成都市新津区",rank:16,recentCatches:123,currentPeople:16,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_17",name:"简阳水库",latitude:39.8142,longitude:116.3274,images:["https://img.yzcdn.cn/vant/apple-17.jpg"],description:"大型水库，环境优美，适合野钓。",rating:4.6,distance:44.9,type:"reservoir",location:"成都市简阳市",rank:17,recentCatches:71,currentPeople:5,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]},{id:"spot_18",name:"金堂野钓场",latitude:39.9942,longitude:116.4974,images:["https://img.yzcdn.cn/vant/apple-18.jpg"],description:"野钓天堂，环境自然，鱼获丰富。",rating:4.7,distance:47.6,type:"lake",location:"成都市金堂县",rank:18,recentCatches:58,currentPeople:4,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼"]},{id:"spot_19",name:"邛崃山塘",latitude:39.8042,longitude:116.3174,images:["https://img.yzcdn.cn/vant/apple-19.jpg"],description:"山间小塘，环境幽静，适合休闲钓鱼。",rating:4.4,distance:51.2,type:"lake",location:"成都市邛崃市",rank:19,recentCatches:42,currentPeople:2,fishSpecies:["鲫鱼","鲤鱼","草鱼"]},{id:"spot_20",name:"青白江钓场",latitude:39.9942,longitude:116.5074,images:["https://img.yzcdn.cn/vant/apple-20.jpg"],description:"综合钓场，设施齐全，适合各种钓法。",rating:4.8,distance:54.8,type:"lake",location:"成都市青白江区",rank:20,recentCatches:95,currentPeople:8,fishSpecies:["鲫鱼","鲤鱼","草鱼","鲢鱼","鳙鱼","青鱼"]}]),re=[{key:"nearby",label:"附近",hasDropdown:!0},{key:"sort",label:"排序",hasDropdown:!0},{key:"type",label:"类型",hasDropdown:!0},{key:"fish",label:"鱼种",hasDropdown:!0}],de=a(""),pe=a(!1),ve=[{text:"全部",value:"all"},{text:"1km内",value:"1"},{text:"3km内",value:"3"},{text:"5km内",value:"5"},{text:"10km内",value:"10"}],ue=[{text:"距离优先",value:"distance"},{text:"人气优先",value:"popularity"},{text:"评分优先",value:"rating"}],ge=[{text:"全部",value:"all"},{text:"淡水",value:"freshwater"},{text:"海水",value:"saltwater"},{text:"黑坑",value:"black_pit"},{text:"水库",value:"reservoir"},{text:"河流",value:"river"},{text:"湖泊",value:"lake"}],he=[{text:"全部",value:"all"},{text:"鲫鱼",value:"crucian"},{text:"鲤鱼",value:"carp"},{text:"草鱼",value:"grass_carp"},{text:"鲢鱼",value:"silver_carp"},{text:"鳙鱼",value:"bighead_carp"},{text:"青鱼",value:"black_carp"},{text:"马口鱼",value:"opsariichthys"},{text:"溪石斑",value:"stream_bass"},{text:"白条",value:"white_striped"}],me=a("all"),fe=a("distance"),ke=a("all"),ye=a("all"),be=a({lat:39.9042,lng:116.3974}),xe=a(null),_e=a(0),Ce=e=>{switch(e){case 0:x.push("/home");break;case 1:x.push("/profile")}},we=a(1),je=()=>{we.value<2&&(we.value=Math.min(we.value+.2,2),ze())},Se=()=>{we.value>.5&&(we.value=Math.max(we.value-.2,.5),ze())},ze=()=>{const e=Math.round(500/we.value),a=document.querySelector(".map-scale span");a&&(a.textContent=`${e}m`)},Pe=t(()=>{let e=oe.value;if("all"!==me.value){const a=parseInt(me.value);e=e.filter(e=>e.distance<=a)}if("all"!==ke.value&&(e=e.filter(e=>e.type===ke.value)),"all"!==ye.value){const a={crucian:"鲫鱼",carp:"鲤鱼",grass_carp:"草鱼",silver_carp:"鲢鱼",bighead_carp:"鳙鱼",black_carp:"青鱼",opsariichthys:"马口鱼",stream_bass:"溪石斑",white_striped:"白条"}[ye.value];a&&(e=e.filter(e=>e.fishSpecies.includes(a)))}switch(fe.value){case"distance":e.sort((e,a)=>e.distance-a.distance);break;case"popularity":e.sort((e,a)=>a.currentPeople-e.currentPeople);break;case"rating":e.sort((e,a)=>a.rating-e.rating)}return e}),Me=t(()=>Pe.value.slice(0,3)),De=e=>{de.value===e?(de.value="",pe.value=!1):(de.value=e,pe.value=!0)},$e=e=>{const a=50+1e3*(e.longitude-be.value.lng)*we.value,t=50-1e3*(e.latitude-be.value.lat)*we.value;return{left:`${Math.max(5,Math.min(95,a))}%`,top:`${Math.max(5,Math.min(95,t))}%`,transform:`scale(${1/Math.sqrt(we.value)})`}},Ve=()=>{be.value={lat:39.9042,lng:116.3974},xe.value=null,b("已定位到当前位置")},Ue=()=>{b("切换视图")},qe=()=>{x.push("/spot/add")},He=a(!0),Ie=()=>{He.value=!He.value},Ae=e=>{const a={lake:"location",reservoir:"guide-o",river:"water-o",saltwater:"flag-o",black_pit:"gem-o",default:"location-o"};return a[e]||a.default};return i(()=>{console.log("钓点数据:",oe.value),console.log("筛选后的钓点:",Pe.value),console.log("显示的钓点:",Me.value)}),(e,a)=>{const t=g("van-icon"),i=g("van-button"),u=g("van-popup"),oe=g("van-tabbar-item"),we=g("van-tabbar");return h(),l("div",_,[s("div",C,[s("div",w,[s("div",j,[a[3]||(a[3]=n('<div class="map-grid" data-v-ac703bff></div><div class="main-roads" data-v-ac703bff><div class="main-road" style="top:20%;left:10%;width:80%;height:4px;" data-v-ac703bff></div><div class="main-road" style="top:10%;left:20%;width:4px;height:80%;" data-v-ac703bff></div><div class="main-road" style="top:60%;left:30%;width:60%;height:4px;" data-v-ac703bff></div></div><div class="minor-roads" data-v-ac703bff><div class="minor-road" style="top:30%;left:15%;width:70%;height:2px;" data-v-ac703bff></div><div class="minor-road" style="top:15%;left:40%;width:2px;height:70%;" data-v-ac703bff></div><div class="minor-road" style="top:45%;left:25%;width:50%;height:2px;" data-v-ac703bff></div></div><div class="green-areas" data-v-ac703bff><div class="green-area" style="top:25%;left:25%;width:100px;height:100px;border-radius:10px;" data-v-ac703bff></div><div class="green-area" style="top:55%;left:65%;width:80px;height:120px;border-radius:8px;" data-v-ac703bff></div></div><div class="buildings" data-v-ac703bff><div class="building" style="top:35%;left:35%;width:60px;height:40px;border-radius:4px;" data-v-ac703bff></div><div class="building" style="top:45%;left:55%;width:50px;height:70px;border-radius:4px;" data-v-ac703bff></div><div class="building" style="top:65%;left:25%;width:40px;height:40px;border-radius:4px;" data-v-ac703bff></div></div><div class="road-labels" data-v-ac703bff><div class="road-label" style="top:22%;left:50%;" data-v-ac703bff>九兴大道</div><div class="road-label" style="top:50%;left:22%;transform:rotate(-90deg) translate(-50%, -50%);" data-v-ac703bff>科园二路</div><div class="road-label" style="top:62%;left:60%;" data-v-ac703bff>紫瑞大道</div></div>',6)),(h(!0),l(c,null,o(Pe.value,e=>{var a;return h(),l("div",{key:e.id,class:v(["spot-marker",{active:(null==(a=xe.value)?void 0:a.id)===e.id}]),style:m($e(e)),onClick:a=>(e=>{xe.value=e,be.value={lat:e.latitude,lng:e.longitude},b(`选中钓点: ${e.name}`)})(e)},[s("div",z,[r(t,{name:Ae(e.type)},null,8,["name"])]),s("div",P,p(e.name)+" · "+p(e.distance)+"km ",1)],14,S)}),128)),a[4]||(a[4]=s("div",{class:"current-location"},[s("div",{class:"location-pulse"}),s("div",{class:"location-dot"})],-1))]),s("div",M,[s("button",{class:"zoom-btn",onClick:je},[r(t,{name:"plus"})]),s("button",{class:"zoom-btn",onClick:Se},[r(t,{name:"minus"})])]),s("div",D,[r(i,{icon:"aim",onClick:Ve,class:"locate-btn"}),r(i,{icon:"apps-o",onClick:Ue,class:"layers-btn"}),r(i,{icon:"plus",onClick:qe,class:"add-spot-btn"},{default:d(()=>a[5]||(a[5]=[f(" 发布钓点 ",-1)])),_:1,__:[5]})]),a[6]||(a[6]=s("div",{class:"map-scale"},[s("div",{class:"scale-line"}),s("span",null,"500m")],-1))])]),s("div",$,[s("div",V,[(h(),l(c,null,o(re,e=>s("div",{key:e.key,class:v(["filter-tab",{active:de.value===e.key}]),onClick:a=>De(e.key)},[f(p(e.label)+" ",1),e.hasDropdown?(h(),k(t,{key:0,name:"arrow-down"})):y("",!0)],10,U)),64))])]),s("div",{class:v(["spots-list-container",{"list-hidden":!He.value}])},[s("div",{class:"hide-button",onClick:Ie},a[7]||(a[7]=[s("div",{class:"handle-bar"},null,-1)])),s("div",q,[s("div",H,[(h(),l(c,null,o(re,e=>s("div",{key:e.key,class:v(["filter-button",{active:de.value===e.key}]),onClick:a=>De(e.key)},[f(p(e.label)+" ",1),e.hasDropdown?(h(),k(t,{key:0,name:"arrow-down"})):y("",!0)],10,I)),64))]),s("div",A,[s("div",B,"共"+p(Pe.value.length)+"个钓点",1)]),s("div",F,[(h(!0),l(c,null,o(Me.value,(e,t)=>(h(),l("div",{key:e.id,class:"spot-card-item",onClick:a=>(e=>{x.push(`/spot/${e.id}`)})(e)},[s("div",N,[s("img",{src:e.images[0],alt:"钓点图片"},null,8,O)]),s("div",Q,[s("div",R,[s("h3",W,p(e.name),1)]),s("div",X,[a[8]||(a[8]=s("span",{class:"species-label"},"鱼种：",-1)),s("span",E,p(e.fishSpecies.join("、")),1)]),s("div",G,[s("span",J,p(e.type),1),s("span",K,p(e.distance)+"km",1)])])],8,L))),128))])])],2),r(u,{show:pe.value,"onUpdate:show":a[1]||(a[1]=e=>pe.value=e),position:"bottom",style:{maxHeight:"70%"}},{default:d(()=>{return[s("div",T,[s("div",Y,[s("h3",null,p((e=de.value,{nearby:"选择距离",sort:"排序方式",type:"钓点类型",fish:"鱼种选择"}[e]||"")),1),r(t,{name:"cross",onClick:a[0]||(a[0]=e=>pe.value=!1)})]),s("div",Z,["nearby"===de.value?(h(),l("div",ee,[(h(),l(c,null,o(ve,e=>s("div",{key:e.value,class:v(["filter-option",{active:me.value===e.value}]),onClick:a=>{return t=e.value,me.value=t,void(pe.value=!1);var t}},p(e.text),11,ae)),64))])):y("",!0),"sort"===de.value?(h(),l("div",te,[(h(),l(c,null,o(ue,e=>s("div",{key:e.value,class:v(["filter-option",{active:fe.value===e.value}]),onClick:a=>{return t=e.value,fe.value=t,void(pe.value=!1);var t}},p(e.text),11,ie)),64))])):y("",!0),"type"===de.value?(h(),l("div",le,[(h(),l(c,null,o(ge,e=>s("div",{key:e.value,class:v(["filter-option",{active:ke.value===e.value}]),onClick:a=>{return t=e.value,ke.value=t,void(pe.value=!1);var t}},p(e.text),11,se)),64))])):y("",!0),"fish"===de.value?(h(),l("div",ne,[(h(),l(c,null,o(he,e=>s("div",{key:e.value,class:v(["filter-option",{active:ye.value===e.value}]),onClick:a=>{return t=e.value,ye.value=t,void(pe.value=!1);var t}},p(e.text),11,ce)),64))])):y("",!0)])])];var e}),_:1},8,["show"]),r(we,{modelValue:_e.value,"onUpdate:modelValue":a[2]||(a[2]=e=>_e.value=e),onChange:Ce,fixed:"",placeholder:""},{default:d(()=>[r(oe,{icon:"home-o",to:"/home"},{default:d(()=>a[9]||(a[9]=[f("首页",-1)])),_:1,__:[9]}),r(oe,{icon:"user-o",to:"/profile"},{default:d(()=>a[10]||(a[10]=[f("我的",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-ac703bff"]]);export{oe as default};

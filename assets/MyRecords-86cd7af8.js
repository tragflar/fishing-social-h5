import{l as e,r as t,c as s,f as i,L as a,k as c,R as n,Q as r,F as o,V as l,X as d,M as p,N as u,O as m,B as h,S as g,Y as w,W as f}from"./vendor-788d0564.js";import{c as v,a as y,b as k}from"./vant-7a9d22a8.js";import{_}from"./_plugin-vue_export-helper-1b428a4d.js";const S={class:"my-records-page"},C={class:"records-list"},D=["onClick"],I={key:0,class:"record-content"},N={key:1,class:"record-images"},b=["src","alt","onClick"],T={key:0,class:"more-images"},j={class:"record-tags"},z={class:"record-details"},A={class:"detail-item"},x={class:"record-actions"},$={key:0,class:"empty-state"},B=_(e({__name:"MyRecords",setup(e){p();const _=t([]),B=[{id:"record_1",userId:"current_user",spotId:"spot_1",spotName:"翠湖公园钓点",fishCatches:[{fishSpecies:"草鱼",count:1,weight:2.5},{fishSpecies:"鲫鱼",count:2,weight:1.2}],fishSpecies:"草鱼",weight:2.5,length:45,images:["https://img.yzcdn.cn/vant/apple-1.jpg","https://img.yzcdn.cn/vant/apple-2.jpg"],equipment:["4.5米钓竿","2号主线","1号子线"],bait:"玉米粒",duration:3.5,weather:{temperature:22,humidity:65,pressure:1013,windSpeed:3.2,windDirection:"东南风",weather:"多云",suitabilityIndex:8},notes:"今天天气不错，鱼口很好，用玉米粒钓到了草鱼和鲫鱼。",catchTime:new Date(Date.now()-864e5),createdAt:new Date(Date.now()-864e5),likes:23,comments:[],isPersonalBest:!0,isNewSpot:!1,isNewSpecies:!1,description:"今天天气不错，鱼口很好，用玉米粒钓到了草鱼和鲫鱼。"},{id:"record_2",userId:"current_user",spotId:"spot_2",spotName:"野鸭湖水库",fishCatches:[{fishSpecies:"鲤鱼",count:1,weight:1.8}],fishSpecies:"鲤鱼",weight:1.8,length:38,images:["https://img.yzcdn.cn/vant/apple-3.jpg"],equipment:["5.4米钓竿","3号主线","2号子线"],bait:"蚯蚓",duration:4,weather:{temperature:18,humidity:70,pressure:1008,windSpeed:2.1,windDirection:"北风",weather:"阴天",suitabilityIndex:7},notes:"阴天钓鱼，鱼儿比较活跃。",catchTime:new Date(Date.now()-2592e5),createdAt:new Date(Date.now()-2592e5),likes:15,comments:[],isPersonalBest:!1,isNewSpot:!0,isNewSpecies:!1,description:"阴天钓鱼，鱼儿比较活跃。"},{id:"record_3",userId:"current_user",spotId:"spot_1",spotName:"翠湖公园钓点",fishCatches:[{fishSpecies:"鲫鱼",count:3,weight:.8},{fishSpecies:"白条",count:5,weight:.3}],fishSpecies:"鲫鱼",weight:.8,length:25,images:[],equipment:["3.6米钓竿","1号主线","0.8号子线"],bait:"红虫",duration:2,weather:{temperature:25,humidity:60,pressure:1015,windSpeed:1.5,windDirection:"微风",weather:"晴天",suitabilityIndex:9},notes:"晴天钓鲫鱼，收获不错，还钓到了几条白条。",catchTime:new Date(Date.now()-6048e5),createdAt:new Date(Date.now()-6048e5),likes:8,comments:[],isPersonalBest:!1,isNewSpot:!1,isNewSpecies:!0,description:"晴天钓鲫鱼，收获不错，还钓到了几条白条。"}],P=s(()=>[..._.value].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));return i(()=>{(()=>{const e=localStorage.getItem("fishing_records");if(e){const t=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createTime||e.createdAt),catchTime:new Date(e.catchTime)}));_.value=t}else _.value=B})()}),(e,t)=>{const s=u("van-button"),i=u("van-nav-bar"),p=u("van-tag"),B=u("van-icon"),q=u("van-empty");return m(),a("div",S,[c(i,{title:"我的钓获","left-arrow":"",onClickLeft:t[1]||(t[1]=t=>e.$router.back())},{right:n(()=>[c(s,{size:"small",type:"primary",onClick:t[0]||(t[0]=t=>e.$router.push("/add-record"))},{default:n(()=>[...t[3]||(t[3]=[h(" 添加记录 ",-1)])]),_:1})]),_:1}),r("div",C,[(m(!0),a(o,null,l(P.value,e=>(m(),a("div",{key:e.id,class:"record-card",onClick:e=>{y("记录详情功能开发中")}},[e.notes?(m(),a("div",I,g(e.notes),1)):d("",!0),e.images.length>0?(m(),a("div",N,[(m(!0),a(o,null,l(e.images.slice(0,3),(t,s)=>(m(),a("img",{key:s,src:t,alt:`钓获图片${s+1}`,class:"record-image",onClick:w(t=>{return i=e.images,void v({images:i,startPosition:s});var i},["stop"])},null,8,b))),128)),e.images.length>3?(m(),a("div",T," +"+g(e.images.length-3),1)):d("",!0)])):d("",!0),r("div",j,[(m(!0),a(o,null,l(e.fishCatches&&e.fishCatches.length?e.fishCatches.map(e=>e.fishSpecies):[e.fishSpecies],(e,t)=>(m(),f(p,{key:t,type:"primary",plain:"",round:"",class:"fish-tag"},{default:n(()=>[h(g(e),1)]),_:2},1024))),128))]),r("div",z,[r("div",A,[c(B,{name:"location-o"}),r("span",null,g(e.spotName),1)])]),r("div",x,[c(s,{type:"default",size:"small",icon:"share-o",onClick:w(t=>(e=>{y(`分享${e.fishSpecies}钓获记录`)})(e),["stop"])},{default:n(()=>[...t[4]||(t[4]=[h(" 分享 ",-1)])]),_:2},1032,["onClick"]),c(s,{type:"default",size:"small",icon:"edit",onClick:w(e=>{y("编辑记录功能开发中")},["stop"])},{default:n(()=>[...t[5]||(t[5]=[h(" 编辑 ",-1)])]),_:2},1032,["onClick"]),c(s,{type:"default",size:"small",icon:"delete-o",onClick:w(t=>(e=>{k({title:"确认删除",message:"确定要删除这条钓获记录吗？"}).then(()=>{const t=_.value.findIndex(t=>t.id===e.id);t>-1&&(_.value.splice(t,1),y("删除成功"))}).catch(()=>{})})(e),["stop"])},{default:n(()=>[...t[6]||(t[6]=[h(" 删除 ",-1)])]),_:2},1032,["onClick"])])],8,D))),128)),0===P.value.length?(m(),a("div",$,[c(q,{description:"暂无钓获记录"},{default:n(()=>[c(s,{type:"primary",onClick:t[2]||(t[2]=t=>e.$router.push("/add-record"))},{default:n(()=>[...t[7]||(t[7]=[h(" 添加第一条记录 ",-1)])]),_:1})]),_:1})])):d("",!0)])])}}}),[["__scopeId","data-v-d1e25d82"]]);export{B as default};

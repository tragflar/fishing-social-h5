import{a as t}from"./vant-7a9d22a8.js";const o="fishProgress",e=t=>{try{const e=localStorage.getItem(`${o}_${t}`);if(e){const t=JSON.parse(e);return Object.keys(t.unlockedFish).forEach(o=>{t.unlockedFish[o].firstCatchDate&&(t.unlockedFish[o].firstCatchDate=new Date(t.unlockedFish[o].firstCatchDate))}),t}}catch(e){console.error("读取鱼类解锁进度失败:",e)}return{userId:t,unlockedFish:{},totalUnlocked:0}},a=(t,e)=>{try{localStorage.setItem(`${o}_${t}`,JSON.stringify(e))}catch(a){console.error("保存鱼类解锁进度失败:",a)}},c=(t,o,c)=>{var n;const l=e(t),r=o;return(null==(n=l.unlockedFish[r])?void 0:n.isUnlocked)?(l.unlockedFish[r].totalCatchCount++,a(t,l),!1):(l.unlockedFish[r]={isUnlocked:!0,firstCatchDate:c.date,totalCatchCount:1},l.totalUnlocked++,a(t,l),s(o),!0)},s=o=>{t({message:`🎉 解锁新鱼类：${o}！`,type:"success",duration:3e3})},n=(t,o)=>{const a=e(t).unlockedFish[o];return{fishId:o,isUnlocked:(null==a?void 0:a.isUnlocked)||!1,firstCatchDate:null==a?void 0:a.firstCatchDate,totalCatchCount:(null==a?void 0:a.totalCatchCount)||0}},l=t=>{const o=e(t);return{totalUnlocked:o.totalUnlocked,totalFish:15,unlockPercentage:Math.round(o.totalUnlocked/15*100)}};export{l as a,e as b,n as g,c as u};
